import{e as Fn,k as ba,f as Sa,O as ka,G as p,h as Qr,i as Ta,y as Mt,v as Ua,I as pr,V as Dn,o as Ar,j as _e,u as wa,Z as An,m as _a,A as Ca,E as Fa,w as Da,n as hn,p as Aa,$ as pn,q as Oa,r as It,_ as On,s as Ea,t as Ma,x as Ia,z as Ra,H as Ba,B as nr,d as Pa,C as La,J as vn}from"./index-B59EHt6E.js";nr();nr();nr();function En(){var h=Object.create(null);function t(r,e){var a=r.id,i=r.name,n=r.dependencies;n===void 0&&(n=[]);var o=r.init;o===void 0&&(o=p(function(){},"init"));var s=r.getTransferables;if(s===void 0&&(s=null),!h[a])try{n=n.map(function(u){return u&&u.isWorkerModule&&(t(u,function(f){if(f instanceof Error)throw f}),u=h[u.id].value),u}),o=c("<"+i+">.init",o),s&&(s=c("<"+i+">.getTransferables",s));var l=null;typeof o=="function"?l=o.apply(void 0,n):console.error("worker module init function failed to rehydrate"),h[a]={id:a,value:l,getTransferables:s},e(l)}catch(u){u&&u.noLog||console.error(u),e(u)}}p(t,"registerModule");function d(r,e){var a,i=r.id,n=r.args;(!h[i]||typeof h[i].value!="function")&&e(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var o=(a=h[i]).value.apply(a,n);o&&typeof o.then=="function"?o.then(s,function(l){return e(l instanceof Error?l:new Error(""+l))}):s(o)}catch(l){e(l)}function s(l){try{var u=h[i].getTransferables&&h[i].getTransferables(l);(!u||!Array.isArray(u)||!u.length)&&(u=void 0),e(l,u)}catch(f){console.error(f),e(f)}}p(s,"handleResult")}p(d,"callModule");function c(r,e){var a=void 0;self.troikaDefine=function(n){return a=n};var i=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+e+`
)`],{type:"application/javascript"}));try{importScripts(i)}catch(n){console.error(n)}return URL.revokeObjectURL(i),delete self.troikaDefine,a}p(c,"rehydrate"),self.addEventListener("message",function(r){var e=r.data,a=e.messageId,i=e.action,n=e.data;try{i==="registerModule"&&t(n,function(o){o instanceof Error?postMessage({messageId:a,success:!1,error:o.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof o=="function"}})}),i==="callModule"&&d(n,function(o,s){o instanceof Error?postMessage({messageId:a,success:!1,error:o.message}):postMessage({messageId:a,success:!0,result:o},s||void 0)})}catch(o){postMessage({messageId:a,success:!1,error:o.stack})}})}p(En,"workerBootstrap");function Mn(h){var t=p(function(){for(var d=[],c=arguments.length;c--;)d[c]=arguments[c];return t._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,d);throw new Error("Worker module function was called but `init` did not return a callable function")})},"moduleFunc");return t._getInitResult=function(){var d=h.dependencies,c=h.init;d=Array.isArray(d)?d.map(function(e){return e&&(e=e.onMainThread||e,e._getInitResult&&(e=e._getInitResult())),e}):[];var r=Promise.all(d).then(function(e){return c.apply(null,e)});return t._getInitResult=function(){return r},r},t}p(Mn,"defineMainThreadModule");var In=p(function(){var h=!1;if(typeof window<"u"&&typeof window.document<"u")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),h=!0}catch(d){typeof vn<"u"&&vn.env.NODE_ENV==="test"||console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+d.message+"]")}return In=p(function(){return h},"supportsWorkers"),h},"supportsWorkers"),Ga=0,Wa=0,xt=!1,_r=Object.create(null),Cr=Object.create(null),Ut=Object.create(null);function ar(h){if((!h||typeof h.init!="function")&&!xt)throw new Error("requires `options.init` function");var t=h.dependencies,d=h.init,c=h.getTransferables,r=h.workerId,e=Mn(h);r==null&&(r="#default");var a="workerModule"+ ++Ga,i=h.name||a,n=null;t=t&&t.map(function(s){return typeof s=="function"&&!s.workerModuleData&&(xt=!0,s=ar({workerId:r,name:"<"+i+"> function dependency: "+s.name,init:`function(){return (
`+Fr(s)+`
)}`}),xt=!1),s&&s.workerModuleData&&(s=s.workerModuleData),s});function o(){for(var s=[],l=arguments.length;l--;)s[l]=arguments[l];if(!In())return e.apply(void 0,s);if(!n){n=wt(r,"registerModule",o.workerModuleData);var u=p(function(){n=null,Cr[r].delete(u)},"unregister");(Cr[r]||(Cr[r]=new Set)).add(u)}return n.then(function(f){var g=f.isCallable;if(g)return wt(r,"callModule",{id:a,args:s});throw new Error("Worker module function was called but `init` did not return a callable function")})}return p(o,"moduleFunc"),o.workerModuleData={isWorkerModule:!0,id:a,name:i,dependencies:t,init:Fr(d),getTransferables:c&&Fr(c)},o.onMainThread=e,o}p(ar,"defineWorkerModule");function Rn(h){Cr[h]&&Cr[h].forEach(function(t){t()}),_r[h]&&(_r[h].terminate(),delete _r[h])}p(Rn,"terminateWorker");function Fr(h){var t=h.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}p(Fr,"stringifyFunction");function Bn(h){var t=_r[h];if(!t){var d=Fr(En);t=_r[h]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+h.replace(/\*/g,"")+` **/

;(`+d+")()"],{type:"application/javascript"}))),t.onmessage=function(c){var r=c.data,e=r.messageId,a=Ut[e];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Ut[e],a(r)}}return t}p(Bn,"getWorker");function wt(h,t,d){return new Promise(function(c,r){var e=++Wa;Ut[e]=function(a){a.success?c(a.result):r(new Error("Error in worker "+t+" call: "+a.error))},Bn(h).postMessage({messageId:e,action:t,data:d})})}p(wt,"callWorker");nr();function Rt(){var h=function(t){function d(L,B,v,k,D,A,w,j){var R=1-w;j.x=R*R*L+2*R*w*v+w*w*D,j.y=R*R*B+2*R*w*k+w*w*A}p(d,"pointOnQuadraticBezier");function c(L,B,v,k,D,A,w,j,R,z){var X=1-R;z.x=X*X*X*L+3*X*X*R*v+3*X*R*R*D+R*R*R*w,z.y=X*X*X*B+3*X*X*R*k+3*X*R*R*A+R*R*R*j}p(c,"pointOnCubicBezier");function r(L,B){for(var v=/([MLQCZ])([^MLQCZ]*)/g,k,D,A,w,j;k=v.exec(L);){var R=k[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(z){return parseFloat(z)});switch(k[1]){case"M":w=D=R[0],j=A=R[1];break;case"L":(R[0]!==w||R[1]!==j)&&B("L",w,j,w=R[0],j=R[1]);break;case"Q":{B("Q",w,j,w=R[2],j=R[3],R[0],R[1]);break}case"C":{B("C",w,j,w=R[4],j=R[5],R[0],R[1],R[2],R[3]);break}case"Z":(w!==D||j!==A)&&B("L",w,j,D,A);break}}}p(r,"forEachPathCommand");function e(L,B,v){v===void 0&&(v=16);var k={x:0,y:0};r(L,function(D,A,w,j,R,z,X,J,Y){switch(D){case"L":B(A,w,j,R);break;case"Q":{for(var N=A,fe=w,ce=1;ce<v;ce++)d(A,w,z,X,j,R,ce/(v-1),k),B(N,fe,k.x,k.y),N=k.x,fe=k.y;break}case"C":{for(var ne=A,$=w,ue=1;ue<v;ue++)c(A,w,z,X,J,Y,j,R,ue/(v-1),k),B(ne,$,k.x,k.y),ne=k.x,$=k.y;break}}})}p(e,"pathToLineSegments");var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",n=new WeakMap,o={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function s(L,B){var v=L.getContext?L.getContext("webgl",o):L,k=n.get(v);if(!k){let X=function(ne){var $=A[ne];if(!$&&($=A[ne]=v.getExtension(ne),!$))throw new Error(ne+" not supported");return $},J=function(ne,$){var ue=v.createShader($);return v.shaderSource(ue,ne),v.compileShader(ue),ue},Y=function(ne,$,ue,V){if(!w[ne]){var se={},Z={},G=v.createProgram();v.attachShader(G,J($,v.VERTEX_SHADER)),v.attachShader(G,J(ue,v.FRAGMENT_SHADER)),v.linkProgram(G),w[ne]={program:G,transaction:p(function(ge){v.useProgram(G),ge({setUniform:p(function(Q,ee){for(var re=[],ae=arguments.length-2;ae-- >0;)re[ae]=arguments[ae+2];var me=Z[ee]||(Z[ee]=v.getUniformLocation(G,ee));v["uniform"+Q].apply(v,[me].concat(re))},"setUniform"),setAttribute:p(function(Q,ee,re,ae,me){var K=se[Q];K||(K=se[Q]={buf:v.createBuffer(),loc:v.getAttribLocation(G,Q),data:null}),v.bindBuffer(v.ARRAY_BUFFER,K.buf),v.vertexAttribPointer(K.loc,ee,v.FLOAT,!1,0,0),v.enableVertexAttribArray(K.loc),D?v.vertexAttribDivisor(K.loc,ae):X("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(K.loc,ae),me!==K.data&&(v.bufferData(v.ARRAY_BUFFER,me,re),K.data=me)},"setAttribute")})},"transaction")}}w[ne].transaction(V)},N=function(ne,$){R++;try{v.activeTexture(v.TEXTURE0+R);var ue=j[ne];ue||(ue=j[ne]=v.createTexture(),v.bindTexture(v.TEXTURE_2D,ue),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST)),v.bindTexture(v.TEXTURE_2D,ue),$(ue,R)}finally{R--}},fe=function(ne,$,ue){var V=v.createFramebuffer();z.push(V),v.bindFramebuffer(v.FRAMEBUFFER,V),v.activeTexture(v.TEXTURE0+$),v.bindTexture(v.TEXTURE_2D,ne),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,ne,0);try{ue(V)}finally{v.deleteFramebuffer(V),v.bindFramebuffer(v.FRAMEBUFFER,z[--z.length-1]||null)}},ce=function(){A={},w={},j={},R=-1,z.length=0};p(X,"getExtension"),p(J,"compileShader"),p(Y,"withProgram"),p(N,"withTexture"),p(fe,"withTextureFramebuffer"),p(ce,"handleContextLoss");var D=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext,A={},w={},j={},R=-1,z=[];v.canvas.addEventListener("webglcontextlost",function(ne){ce(),ne.preventDefault()},!1),n.set(v,k={gl:v,isWebGL2:D,getExtension:X,withProgram:Y,withTexture:N,withTextureFramebuffer:fe,handleContextLoss:ce})}B(k)}p(s,"withWebGLContext");function l(L,B,v,k,D,A,w,j){w===void 0&&(w=15),j===void 0&&(j=null),s(L,function(R){var z=R.gl,X=R.withProgram,J=R.withTexture;J("copy",function(Y,N){z.texImage2D(z.TEXTURE_2D,0,z.RGBA,D,A,0,z.RGBA,z.UNSIGNED_BYTE,B),X("copy",a,i,function(fe){var ce=fe.setUniform,ne=fe.setAttribute;ne("aUV",2,z.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ce("1i","image",N),z.bindFramebuffer(z.FRAMEBUFFER,j||null),z.disable(z.BLEND),z.colorMask(w&8,w&4,w&2,w&1),z.viewport(v,k,D,A),z.scissor(v,k,D,A),z.drawArrays(z.TRIANGLES,0,3)})})})}p(l,"renderImageData");function u(L,B,v){var k=L.width,D=L.height;s(L,function(A){var w=A.gl,j=new Uint8Array(k*D*4);w.readPixels(0,0,k,D,w.RGBA,w.UNSIGNED_BYTE,j),L.width=B,L.height=v,l(w,j,0,0,k,D)})}p(u,"resizeWebGLCanvasWithoutClearing");var f=Object.freeze({__proto__:null,withWebGLContext:s,renderImageData:l,resizeWebGLCanvasWithoutClearing:u});function g(L,B,v,k,D,A){A===void 0&&(A=1);var w=new Uint8Array(L*B),j=k[2]-k[0],R=k[3]-k[1],z=[];e(v,function(ne,$,ue,V){z.push({x1:ne,y1:$,x2:ue,y2:V,minX:Math.min(ne,ue),minY:Math.min($,V),maxX:Math.max(ne,ue),maxY:Math.max($,V)})}),z.sort(function(ne,$){return ne.maxX-$.maxX});for(var X=0;X<L;X++)for(var J=0;J<B;J++){var Y=fe(k[0]+j*(X+.5)/L,k[1]+R*(J+.5)/B),N=Math.pow(1-Math.abs(Y)/D,A)/2;Y<0&&(N=1-N),N=Math.max(0,Math.min(255,Math.round(N*255))),w[J*L+X]=N}return w;function fe(ne,$){for(var ue=1/0,V=1/0,se=z.length;se--;){var Z=z[se];if(Z.maxX+V<=ne)break;if(ne+V>Z.minX&&$-V<Z.maxY&&$+V>Z.minY){var G=T(ne,$,Z.x1,Z.y1,Z.x2,Z.y2);G<ue&&(ue=G,V=Math.sqrt(ue))}}return ce(ne,$)&&(V=-V),V}function ce(ne,$){for(var ue=0,V=z.length;V--;){var se=z[V];if(se.maxX<=ne)break;var Z=se.y1>$!=se.y2>$&&ne<(se.x2-se.x1)*($-se.y1)/(se.y2-se.y1)+se.x1;Z&&(ue+=se.y1<se.y2?1:-1)}return ue!==0}}p(g,"generate$2");function x(L,B,v,k,D,A,w,j,R,z){A===void 0&&(A=1),j===void 0&&(j=0),R===void 0&&(R=0),z===void 0&&(z=0),m(L,B,v,k,D,A,w,null,j,R,z)}p(x,"generateIntoCanvas$2");function m(L,B,v,k,D,A,w,j,R,z,X){A===void 0&&(A=1),R===void 0&&(R=0),z===void 0&&(z=0),X===void 0&&(X=0);for(var J=g(L,B,v,k,D,A),Y=new Uint8Array(J.length*4),N=0;N<J.length;N++)Y[N*4+X]=J[N];l(w,Y,R,z,L,B,1<<3-X,j)}p(m,"generateIntoFramebuffer$1");function T(L,B,v,k,D,A){var w=D-v,j=A-k,R=w*w+j*j,z=R?Math.max(0,Math.min(1,((L-v)*w+(B-k)*j)/R)):0,X=L-(v+z*w),J=B-(k+z*j);return X*X+J*J}p(T,"absSquareDistanceToLineSegment");var C=Object.freeze({__proto__:null,generate:g,generateIntoCanvas:x,generateIntoFramebuffer:m}),_="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",U="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",E=new Float32Array([0,0,2,0,0,2]),S=null,F=!1,P={},I=new WeakMap;function H(L){if(!F&&!q(L))throw new Error("WebGL generation not supported")}p(H,"validateSupport");function y(L,B,v,k,D,A,w){if(A===void 0&&(A=1),w===void 0&&(w=null),!w&&(w=S,!w)){var j=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!j)throw new Error("OffscreenCanvas or DOM canvas not supported");w=S=j.getContext("webgl",{depth:!1})}H(w);var R=new Uint8Array(L*B*4);s(w,function(Y){var N=Y.gl,fe=Y.withTexture,ce=Y.withTextureFramebuffer;fe("readable",function(ne,$){N.texImage2D(N.TEXTURE_2D,0,N.RGBA,L,B,0,N.RGBA,N.UNSIGNED_BYTE,null),ce(ne,$,function(ue){O(L,B,v,k,D,A,N,ue,0,0,0),N.readPixels(0,0,L,B,N.RGBA,N.UNSIGNED_BYTE,R)})})});for(var z=new Uint8Array(L*B),X=0,J=0;X<R.length;X+=4)z[J++]=R[X];return z}p(y,"generate$1");function M(L,B,v,k,D,A,w,j,R,z){A===void 0&&(A=1),j===void 0&&(j=0),R===void 0&&(R=0),z===void 0&&(z=0),O(L,B,v,k,D,A,w,null,j,R,z)}p(M,"generateIntoCanvas$1");function O(L,B,v,k,D,A,w,j,R,z,X){A===void 0&&(A=1),R===void 0&&(R=0),z===void 0&&(z=0),X===void 0&&(X=0),H(w);var J=[];e(v,function(Y,N,fe,ce){J.push(Y,N,fe,ce)}),J=new Float32Array(J),s(w,function(Y){var N=Y.gl,fe=Y.isWebGL2,ce=Y.getExtension,ne=Y.withProgram,$=Y.withTexture,ue=Y.withTextureFramebuffer,V=Y.handleContextLoss;if($("rawDistances",function(se,Z){(L!==se._lastWidth||B!==se._lastHeight)&&N.texImage2D(N.TEXTURE_2D,0,N.RGBA,se._lastWidth=L,se._lastHeight=B,0,N.RGBA,N.UNSIGNED_BYTE,null),ne("main",_,b,function(G){var ge=G.setAttribute,Q=G.setUniform,ee=!fe&&ce("ANGLE_instanced_arrays"),re=!fe&&ce("EXT_blend_minmax");ge("aUV",2,N.STATIC_DRAW,0,E),ge("aLineSegment",4,N.DYNAMIC_DRAW,1,J),Q.apply(void 0,["4f","uGlyphBounds"].concat(k)),Q("1f","uMaxDistance",D),Q("1f","uExponent",A),ue(se,Z,function(ae){N.enable(N.BLEND),N.colorMask(!0,!0,!0,!0),N.viewport(0,0,L,B),N.scissor(0,0,L,B),N.blendFunc(N.ONE,N.ONE),N.blendEquationSeparate(N.FUNC_ADD,fe?N.MAX:re.MAX_EXT),N.clear(N.COLOR_BUFFER_BIT),fe?N.drawArraysInstanced(N.TRIANGLES,0,3,J.length/4):ee.drawArraysInstancedANGLE(N.TRIANGLES,0,3,J.length/4)})}),ne("post",a,U,function(G){G.setAttribute("aUV",2,N.STATIC_DRAW,0,E),G.setUniform("1i","tex",Z),N.bindFramebuffer(N.FRAMEBUFFER,j),N.disable(N.BLEND),N.colorMask(X===0,X===1,X===2,X===3),N.viewport(R,z,L,B),N.scissor(R,z,L,B),N.drawArrays(N.TRIANGLES,0,3)})}),N.isContextLost())throw V(),new Error("webgl context lost")})}p(O,"generateIntoFramebuffer");function q(L){var B=!L||L===S?P:L.canvas||L,v=I.get(B);if(v===void 0){F=!0;var k=null;try{var D=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],A=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,L);v=A&&D.length===A.length&&A.every(function(w,j){return w===D[j]}),v||(k="bad trial run results",console.info(D,A))}catch(w){v=!1,k=w.message}k&&console.warn("WebGL SDF generation not supported:",k),F=!1,I.set(B,v)}return v}p(q,"isSupported");var W=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:M,generateIntoFramebuffer:O,isSupported:q});function te(L,B,v,k,D,A){D===void 0&&(D=Math.max(k[2]-k[0],k[3]-k[1])/2),A===void 0&&(A=1);try{return y.apply(W,arguments)}catch(w){return console.info("WebGL SDF generation failed, falling back to JS",w),g.apply(C,arguments)}}p(te,"generate");function ie(L,B,v,k,D,A,w,j,R,z){D===void 0&&(D=Math.max(k[2]-k[0],k[3]-k[1])/2),A===void 0&&(A=1),j===void 0&&(j=0),R===void 0&&(R=0),z===void 0&&(z=0);try{return M.apply(W,arguments)}catch(X){return console.info("WebGL SDF generation failed, falling back to JS",X),x.apply(C,arguments)}}return p(ie,"generateIntoCanvas"),t.forEachPathCommand=r,t.generate=te,t.generateIntoCanvas=ie,t.javascript=C,t.pathToLineSegments=e,t.webgl=W,t.webglUtils=f,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return h}p(Rt,"SDFGenerator");nr();function Pn(){var h=function(t){var d={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},c={},r={};c.L=1,r[1]="L",Object.keys(d).forEach(function(V,se){c[V]=1<<se+1,r[c[V]]=V}),Object.freeze(c);var e=c.LRI|c.RLI|c.FSI,a=c.L|c.R|c.AL,i=c.B|c.S|c.WS|c.ON|c.FSI|c.LRI|c.RLI|c.PDI,n=c.BN|c.RLE|c.LRE|c.RLO|c.LRO|c.PDF,o=c.S|c.WS|c.B|e|c.PDI|n,s=null;function l(){if(!s){s=new Map;var V=p(function(Z){if(d.hasOwnProperty(Z)){var G=0;d[Z].split(",").forEach(function(ge){var Q=ge.split("+"),ee=Q[0],re=Q[1];ee=parseInt(ee,36),re=re?parseInt(re,36):0,s.set(G+=ee,c[Z]);for(var ae=0;ae<re;ae++)s.set(++G,c[Z])})}},"loop");for(var se in d)V(se)}}p(l,"parseData");function u(V){return l(),s.get(V.codePointAt(0))||c.L}p(u,"getBidiCharType");function f(V){return r[u(V)]}p(f,"getBidiCharTypeName");var g={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function x(V,se){var Z=36,G=0,ge=new Map,Q=se&&new Map,ee;return V.split(",").forEach(p(function re(ae){if(ae.indexOf("+")!==-1)for(var me=+ae;me--;)re(ee);else{ee=ae;var K=ae.split(">"),he=K[0],Te=K[1];he=String.fromCodePoint(G+=parseInt(he,Z)),Te=String.fromCodePoint(G+=parseInt(Te,Z)),ge.set(he,Te),se&&Q.set(Te,he)}},"visit")),{map:ge,reverseMap:Q}}p(x,"parseCharacterMap");var m,T,C;function _(){if(!m){var V=x(g.pairs,!0),se=V.map,Z=V.reverseMap;m=se,T=Z,C=x(g.canonical,!1).map}}p(_,"parse$1");function b(V){return _(),m.get(V)||null}p(b,"openingToClosingBracket");function U(V){return _(),T.get(V)||null}p(U,"closingToOpeningBracket");function E(V){return _(),C.get(V)||null}p(E,"getCanonicalBracket");var S=c.L,F=c.R,P=c.EN,I=c.ES,H=c.ET,y=c.AN,M=c.CS,O=c.B,q=c.S,W=c.ON,te=c.BN,ie=c.NSM,L=c.AL,B=c.LRO,v=c.RLO,k=c.LRE,D=c.RLE,A=c.PDF,w=c.LRI,j=c.RLI,R=c.FSI,z=c.PDI;function X(V,se){for(var Z=125,G=new Uint32Array(V.length),ge=0;ge<V.length;ge++)G[ge]=u(V[ge]);var Q=new Map;function ee(Be,ze){var Pe=G[Be];G[Be]=ze,Q.set(Pe,Q.get(Pe)-1),Pe&i&&Q.set(i,Q.get(i)-1),Q.set(ze,(Q.get(ze)||0)+1),ze&i&&Q.set(i,(Q.get(i)||0)+1)}p(ee,"changeCharType");for(var re=new Uint8Array(V.length),ae=new Map,me=[],K=null,he=0;he<V.length;he++)K||me.push(K={start:he,end:V.length-1,level:se==="rtl"?1:se==="ltr"?0:cn(he,!1)}),G[he]&O&&(K.end=he,K=null);for(var Te=D|k|v|B|e|z|A|O,we=p(function(Be){return Be+(Be&1?1:2)},"nextEven"),xe=p(function(Be){return Be+(Be&1?2:1)},"nextOdd"),Ae=0;Ae<me.length;Ae++){K=me[Ae];var le=[{_level:K.level,_override:0,_isolate:0}],ye=void 0,Ce=0,Ue=0,Re=0;Q.clear();for(var de=K.start;de<=K.end;de++){var pe=G[de];if(ye=le[le.length-1],Q.set(pe,(Q.get(pe)||0)+1),pe&i&&Q.set(i,(Q.get(i)||0)+1),pe&Te)if(pe&(D|k)){re[de]=ye._level;var He=(pe===D?xe:we)(ye._level);He<=Z&&!Ce&&!Ue?le.push({_level:He,_override:0,_isolate:0}):Ce||Ue++}else if(pe&(v|B)){re[de]=ye._level;var Se=(pe===v?xe:we)(ye._level);Se<=Z&&!Ce&&!Ue?le.push({_level:Se,_override:pe&v?F:S,_isolate:0}):Ce||Ue++}else if(pe&e){pe&R&&(pe=cn(de+1,!0)===1?j:w),re[de]=ye._level,ye._override&&ee(de,ye._override);var be=(pe===j?xe:we)(ye._level);be<=Z&&Ce===0&&Ue===0?(Re++,le.push({_level:be,_override:0,_isolate:1,_isolInitIndex:de})):Ce++}else if(pe&z){if(Ce>0)Ce--;else if(Re>0){for(Ue=0;!le[le.length-1]._isolate;)le.pop();var Oe=le[le.length-1]._isolInitIndex;Oe!=null&&(ae.set(Oe,de),ae.set(de,Oe)),le.pop(),Re--}ye=le[le.length-1],re[de]=ye._level,ye._override&&ee(de,ye._override)}else pe&A?(Ce===0&&(Ue>0?Ue--:!ye._isolate&&le.length>1&&(le.pop(),ye=le[le.length-1])),re[de]=ye._level):pe&O&&(re[de]=K.level);else re[de]=ye._level,ye._override&&pe!==te&&ee(de,ye._override)}for(var Fe=[],ve=null,ke=K.start;ke<=K.end;ke++){var Me=G[ke];if(!(Me&n)){var Ie=re[ke],De=Me&e,Ve=Me===z;ve&&Ie===ve._level?(ve._end=ke,ve._endsWithIsolInit=De):Fe.push(ve={_start:ke,_end:ke,_level:Ie,_startsWithPDI:Ve,_endsWithIsolInit:De})}}for(var Ke=[],qe=0;qe<Fe.length;qe++){var Ye=Fe[qe];if(!Ye._startsWithPDI||Ye._startsWithPDI&&!ae.has(Ye._start)){for(var Xe=[ve=Ye],$e=void 0;ve&&ve._endsWithIsolInit&&($e=ae.get(ve._end))!=null;)for(var Le=qe+1;Le<Fe.length;Le++)if(Fe[Le]._start===$e){Xe.push(ve=Fe[Le]);break}for(var je=[],Kr=0;Kr<Xe.length;Kr++)for(var Vt=Xe[Kr],$r=Vt._start;$r<=Vt._end;$r++)je.push($r);for(var pa=re[je[0]],qt=K.level,Or=je[0]-1;Or>=0;Or--)if(!(G[Or]&n)){qt=re[Or];break}var et=je[je.length-1],va=re[et],Yt=K.level;if(!(G[et]&e)){for(var Er=et+1;Er<=K.end;Er++)if(!(G[Er]&n)){Yt=re[Er];break}}Ke.push({_seqIndices:je,_sosType:Math.max(qt,pa)%2?F:S,_eosType:Math.max(Yt,va)%2?F:S})}}for(var rt=0;rt<Ke.length;rt++){var tt=Ke[rt],oe=tt._seqIndices,vr=tt._sosType,ga=tt._eosType,ir=re[oe[0]]&1?F:S;if(Q.get(ie))for(var Mr=0;Mr<oe.length;Mr++){var Ht=oe[Mr];if(G[Ht]&ie){for(var nt=vr,Ir=Mr-1;Ir>=0;Ir--)if(!(G[oe[Ir]]&n)){nt=G[oe[Ir]];break}ee(Ht,nt&(e|z)?W:nt)}}if(Q.get(P))for(var Rr=0;Rr<oe.length;Rr++){var Xt=oe[Rr];if(G[Xt]&P)for(var Br=Rr-1;Br>=-1;Br--){var Zt=Br===-1?vr:G[oe[Br]];if(Zt&a){Zt===L&&ee(Xt,y);break}}}if(Q.get(L))for(var at=0;at<oe.length;at++){var Qt=oe[at];G[Qt]&L&&ee(Qt,F)}if(Q.get(I)||Q.get(M))for(var gr=1;gr<oe.length-1;gr++){var it=oe[gr];if(G[it]&(I|M)){for(var or=0,ot=0,st=gr-1;st>=0&&(or=G[oe[st]],!!(or&n));st--);for(var lt=gr+1;lt<oe.length&&(ot=G[oe[lt]],!!(ot&n));lt++);or===ot&&(G[it]===I?or===P:or&(P|y))&&ee(it,or)}}if(Q.get(P))for(var Ne=0;Ne<oe.length;Ne++){var ma=oe[Ne];if(G[ma]&P){for(var Pr=Ne-1;Pr>=0&&G[oe[Pr]]&(H|n);Pr--)ee(oe[Pr],P);for(Ne++;Ne<oe.length&&G[oe[Ne]]&(H|n|P);Ne++)G[oe[Ne]]!==P&&ee(oe[Ne],P)}}if(Q.get(H)||Q.get(I)||Q.get(M))for(var mr=0;mr<oe.length;mr++){var Jt=oe[mr];if(G[Jt]&(H|I|M)){ee(Jt,W);for(var Lr=mr-1;Lr>=0&&G[oe[Lr]]&n;Lr--)ee(oe[Lr],W);for(var Gr=mr+1;Gr<oe.length&&G[oe[Gr]]&n;Gr++)ee(oe[Gr],W)}}if(Q.get(P))for(var ut=0,Kt=vr;ut<oe.length;ut++){var $t=oe[ut],ft=G[$t];ft&P?Kt===S&&ee($t,S):ft&a&&(Kt=ft)}if(Q.get(i)){var yr=F|P|y,en=yr|S,Wr=[];{for(var sr=[],lr=0;lr<oe.length;lr++)if(G[oe[lr]]&i){var xr=V[oe[lr]],rn=void 0;if(b(xr)!==null)if(sr.length<63)sr.push({char:xr,seqIndex:lr});else break;else if((rn=U(xr))!==null)for(var br=sr.length-1;br>=0;br--){var ct=sr[br].char;if(ct===rn||ct===U(E(xr))||b(E(ct))===xr){Wr.push([sr[br].seqIndex,lr]),sr.length=br;break}}}Wr.sort(function(Be,ze){return Be[0]-ze[0]})}for(var dt=0;dt<Wr.length;dt++){for(var tn=Wr[dt],zr=tn[0],ht=tn[1],nn=!1,We=0,pt=zr+1;pt<ht;pt++){var an=oe[pt];if(G[an]&en){nn=!0;var on=G[an]&yr?F:S;if(on===ir){We=on;break}}}if(nn&&!We){We=vr;for(var vt=zr-1;vt>=0;vt--){var sn=oe[vt];if(G[sn]&en){var ln=G[sn]&yr?F:S;ln!==ir?We=ln:We=ir;break}}}if(We){if(G[oe[zr]]=G[oe[ht]]=We,We!==ir){for(var Sr=zr+1;Sr<oe.length;Sr++)if(!(G[oe[Sr]]&n)){u(V[oe[Sr]])&ie&&(G[oe[Sr]]=We);break}}if(We!==ir){for(var kr=ht+1;kr<oe.length;kr++)if(!(G[oe[kr]]&n)){u(V[oe[kr]])&ie&&(G[oe[kr]]=We);break}}}}for(var Ze=0;Ze<oe.length;Ze++)if(G[oe[Ze]]&i){for(var un=Ze,gt=Ze,mt=vr,Tr=Ze-1;Tr>=0;Tr--)if(G[oe[Tr]]&n)un=Tr;else{mt=G[oe[Tr]]&yr?F:S;break}for(var fn=ga,Ur=Ze+1;Ur<oe.length;Ur++)if(G[oe[Ur]]&(i|n))gt=Ur;else{fn=G[oe[Ur]]&yr?F:S;break}for(var yt=un;yt<=gt;yt++)G[oe[yt]]=mt===fn?mt:ir;Ze=gt}}}for(var Ge=K.start;Ge<=K.end;Ge++){var ya=re[Ge],jr=G[Ge];if(ya&1?jr&(S|P|y)&&re[Ge]++:jr&F?re[Ge]++:jr&(y|P)&&(re[Ge]+=2),jr&n&&(re[Ge]=Ge===0?K.level:re[Ge-1]),Ge===K.end||u(V[Ge])&(q|O))for(var Nr=Ge;Nr>=0&&u(V[Nr])&o;Nr--)re[Nr]=K.level}}return{levels:re,paragraphs:me};function cn(Be,ze){for(var Pe=Be;Pe<V.length;Pe++){var Qe=G[Pe];if(Qe&(F|L))return 1;if(Qe&(O|S)||ze&&Qe===z)return 0;if(Qe&e){var dn=xa(Pe);Pe=dn===-1?V.length:dn}}return 0}function xa(Be){for(var ze=1,Pe=Be+1;Pe<V.length;Pe++){var Qe=G[Pe];if(Qe&O)break;if(Qe&z){if(--ze===0)return Pe}else Qe&e&&ze++}return-1}}p(X,"getEmbeddingLevels");var J="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Y;function N(){if(!Y){var V=x(J,!0),se=V.map,Z=V.reverseMap;Z.forEach(function(G,ge){se.set(ge,G)}),Y=se}}p(N,"parse");function fe(V){return N(),Y.get(V)||null}p(fe,"getMirroredCharacter");function ce(V,se,Z,G){var ge=V.length;Z=Math.max(0,Z==null?0:+Z),G=Math.min(ge-1,G==null?ge-1:+G);for(var Q=new Map,ee=Z;ee<=G;ee++)if(se[ee]&1){var re=fe(V[ee]);re!==null&&Q.set(ee,re)}return Q}p(ce,"getMirroredCharactersMap");function ne(V,se,Z,G){var ge=V.length;Z=Math.max(0,Z==null?0:+Z),G=Math.min(ge-1,G==null?ge-1:+G);var Q=[];return se.paragraphs.forEach(function(ee){var re=Math.max(Z,ee.start),ae=Math.min(G,ee.end);if(re<ae){for(var me=se.levels.slice(re,ae+1),K=ae;K>=re&&u(V[K])&o;K--)me[K]=ee.level;for(var he=ee.level,Te=1/0,we=0;we<me.length;we++){var xe=me[we];xe>he&&(he=xe),xe<Te&&(Te=xe|1)}for(var Ae=he;Ae>=Te;Ae--)for(var le=0;le<me.length;le++)if(me[le]>=Ae){for(var ye=le;le+1<me.length&&me[le+1]>=Ae;)le++;le>ye&&Q.push([ye+re,le+re])}}}),Q}p(ne,"getReorderSegments");function $(V,se,Z,G){var ge=ue(V,se,Z,G),Q=[].concat(V);return ge.forEach(function(ee,re){Q[re]=(se.levels[ee]&1?fe(V[ee]):null)||V[ee]}),Q.join("")}p($,"getReorderedString");function ue(V,se,Z,G){for(var ge=ne(V,se,Z,G),Q=[],ee=0;ee<V.length;ee++)Q[ee]=ee;return ge.forEach(function(re){for(var ae=re[0],me=re[1],K=Q.slice(ae,me+1),he=K.length;he--;)Q[me-he]=K[he]}),Q}return p(ue,"getReorderedIndices"),t.closingToOpeningBracket=U,t.getBidiCharType=u,t.getBidiCharTypeName=f,t.getCanonicalBracket=E,t.getEmbeddingLevels=X,t.getMirroredCharacter=fe,t.getMirroredCharactersMap=ce,t.getReorderSegments=ne,t.getReorderedIndices=ue,t.getReorderedString=$,t.openingToClosingBracket=b,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return h}p(Pn,"bidiFactory");var za=Pn;nr();var Ln=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Zr(h){let t=/^[ \t]*#include +<([\w\d./]+)>/gm;function d(c,r){let e=Ba[r];return e?Zr(e):c}return p(d,"replace"),h.replace(t,d)}p(Zr,"expandShaderIncludes");var Ee=[];for(let h=0;h<256;h++)Ee[h]=(h<16?"0":"")+h.toString(16);function Gn(){let h=Math.random()*4294967295|0,t=Math.random()*4294967295|0,d=Math.random()*4294967295|0,c=Math.random()*4294967295|0;return(Ee[h&255]+Ee[h>>8&255]+Ee[h>>16&255]+Ee[h>>24&255]+"-"+Ee[t&255]+Ee[t>>8&255]+"-"+Ee[t>>16&15|64]+Ee[t>>24&255]+"-"+Ee[d&63|128]+Ee[d>>8&255]+"-"+Ee[d>>16&255]+Ee[d>>24&255]+Ee[c&255]+Ee[c>>8&255]+Ee[c>>16&255]+Ee[c>>24&255]).toUpperCase()}p(Gn,"generateUUID");var er=Object.assign||function(){let h=arguments[0];for(let t=1,d=arguments.length;t<d;t++){let c=arguments[t];if(c)for(let r in c)Object.prototype.hasOwnProperty.call(c,r)&&(h[r]=c[r])}return h},ja=Date.now(),gn=new WeakMap,mn=new Map,Na=1e10;function dr(h,t){let d=jn(t),c=gn.get(h);if(c||gn.set(h,c=Object.create(null)),c[d])return new c[d];let r="_onBeforeCompile".concat(d),e=p(function(o,s){h.onBeforeCompile.call(this,o,s);let l=this.customProgramCacheKey()+"|"+o.vertexShader+"|"+o.fragmentShader,u=mn[l];if(!u){let f=Wn(this,o,t,d);u=mn[l]=f}o.vertexShader=u.vertexShader,o.fragmentShader=u.fragmentShader,er(o.uniforms,this.uniforms),t.timeUniform&&(o.uniforms[t.timeUniform]={get value(){return Date.now()-ja}}),this[r]&&this[r](o)},"onBeforeCompile"),a=p(function(){return i(t.chained?h:h.clone())},"DerivedMaterial"),i=p(function(o){let s=Object.create(o,n);return Object.defineProperty(s,"baseMaterial",{value:h}),Object.defineProperty(s,"id",{value:Na++}),s.uuid=Gn(),s.uniforms=er({},o.uniforms,t.uniforms),s.defines=er({},o.defines,t.defines),s.defines["TROIKA_DERIVED_MATERIAL_".concat(d)]="",s.extensions=er({},o.extensions,t.extensions),s._listeners=void 0,s},"derive"),n={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:p(()=>h.type,"get"),set:p(o=>{h.type=o},"set")},isDerivedFrom:{writable:!0,configurable:!0,value:p(function(o){let s=this.baseMaterial;return o===s||s.isDerivedMaterial&&s.isDerivedFrom(o)||!1},"value")},customProgramCacheKey:{writable:!0,configurable:!0,value:p(function(){return h.customProgramCacheKey()+"|"+d},"value")},onBeforeCompile:{get(){return e},set(o){this[r]=o}},copy:{writable:!0,configurable:!0,value:p(function(o){return h.copy.call(this,o),!h.isShaderMaterial&&!h.isDerivedMaterial&&(er(this.extensions,o.extensions),er(this.defines,o.defines),er(this.uniforms,Ra.clone(o.uniforms))),this},"value")},clone:{writable:!0,configurable:!0,value:p(function(){let o=new h.constructor;return i(o).copy(this)},"value")},getDepthMaterial:{writable:!0,configurable:!0,value:p(function(){let o=this._depthMaterial;return o||(o=this._depthMaterial=dr(h.isDerivedMaterial?h.getDepthMaterial():new Ma({depthPacking:Ia}),t),o.defines.IS_DEPTH_MATERIAL="",o.uniforms=this.uniforms),o},"value")},getDistanceMaterial:{writable:!0,configurable:!0,value:p(function(){let o=this._distanceMaterial;return o||(o=this._distanceMaterial=dr(h.isDerivedMaterial?h.getDistanceMaterial():new Ea,t),o.defines.IS_DISTANCE_MATERIAL="",o.uniforms=this.uniforms),o},"value")},dispose:{writable:!0,configurable:!0,value(){let{_depthMaterial:o,_distanceMaterial:s}=this;o&&o.dispose(),s&&s.dispose(),h.dispose.call(this)}}};return c[d]=a,new a}p(dr,"createDerivedMaterial");function Wn(h,{vertexShader:t,fragmentShader:d},c,r){let{vertexDefs:e,vertexMainIntro:a,vertexMainOutro:i,vertexTransform:n,fragmentDefs:o,fragmentMainIntro:s,fragmentMainOutro:l,fragmentColorTransform:u,customRewriter:f,timeUniform:g}=c;if(e=e||"",a=a||"",i=i||"",o=o||"",s=s||"",l=l||"",(n||f)&&(t=Zr(t)),(u||f)&&(d=d.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),d=Zr(d)),f){let x=f({vertexShader:t,fragmentShader:d});t=x.vertexShader,d=x.fragmentShader}if(u){let x=[];d=d.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,m=>(x.push(m),"")),l="".concat(u,`
`).concat(x.join(`
`),`
`).concat(l)}if(g){let x=`
uniform float `.concat(g,`;
`);e=x+e,o=x+o}return n&&(t="vec3 troika_position_".concat(r,`;
vec3 troika_normal_`).concat(r,`;
vec2 troika_uv_`).concat(r,`;
`).concat(t,`
`),e="".concat(e,`
void troikaVertexTransform`).concat(r,`(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  `).concat(n,`
}
`),a=`
troika_position_`.concat(r,` = vec3(position);
troika_normal_`).concat(r,` = vec3(normal);
troika_uv_`).concat(r,` = vec2(uv);
troikaVertexTransform`).concat(r,"(troika_position_").concat(r,", troika_normal_").concat(r,", troika_uv_").concat(r,`);
`).concat(a,`
`),t=t.replace(/\b(position|normal|uv)\b/g,(x,m,T,C)=>/\battribute\s+vec[23]\s+$/.test(C.substr(0,T))?m:"troika_".concat(m,"_").concat(r)),h.map&&h.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,"troika_uv_".concat(r)))),t=_t(t,r,e,a,i),d=_t(d,r,o,s,l),{vertexShader:t,fragmentShader:d}}p(Wn,"upgradeShaders");function _t(h,t,d,c,r){return(c||r||d)&&(h=h.replace(Ln,`
`.concat(d,`
void troikaOrigMain`).concat(t,"() {")),h+=`
void main() {
  `.concat(c,`
  troikaOrigMain`).concat(t,`();
  `).concat(r,`
}`)),h}p(_t,"injectIntoShaderCode");function zn(h,t){return h==="uniforms"?void 0:typeof t=="function"?t.toString():t}p(zn,"optionsJsonReplacer");var Va=0,yn=new Map;function jn(h){let t=JSON.stringify(h,zn),d=yn.get(t);return d==null&&yn.set(t,d=++Va),d}p(jn,"getKeyForOptions");function Nn(){return typeof window>"u"&&(self.window=self),function(h){var t={parse:p(function(r){var e=t._bin,a=new Uint8Array(r);if(e.readASCII(a,0,4)=="ttcf"){var i=4;e.readUshort(a,i),i+=2,e.readUshort(a,i),i+=2;var n=e.readUint(a,i);i+=4;for(var o=[],s=0;s<n;s++){var l=e.readUint(a,i);i+=4,o.push(t._readFont(a,l))}return o}return[t._readFont(a,0)]},"parse"),_readFont:p(function(r,e){var a=t._bin,i=e;a.readFixed(r,e),e+=4;var n=a.readUshort(r,e);e+=2,a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:r,_offset:i},l={},u=0;u<n;u++){var f=a.readASCII(r,e,4);e+=4,a.readUint(r,e),e+=4;var g=a.readUint(r,e);e+=4;var x=a.readUint(r,e);e+=4,l[f]={offset:g,length:x}}for(u=0;u<o.length;u++){var m=o[u];l[m]&&(s[m.trim()]=t[m.trim()].parse(r,l[m].offset,l[m].length,s))}return s},"_readFont"),_tabOffset:p(function(r,e,a){for(var i=t._bin,n=i.readUshort(r,a+4),o=a+12,s=0;s<n;s++){var l=i.readASCII(r,o,4);o+=4,i.readUint(r,o),o+=4;var u=i.readUint(r,o);if(o+=4,i.readUint(r,o),o+=4,l==e)return u}return 0},"_tabOffset")};t._bin={readFixed:p(function(r,e){return(r[e]<<8|r[e+1])+(r[e+2]<<8|r[e+3])/65540},"readFixed"),readF2dot14:p(function(r,e){return t._bin.readShort(r,e)/16384},"readF2dot14"),readInt:p(function(r,e){return t._bin._view(r).getInt32(e)},"readInt"),readInt8:p(function(r,e){return t._bin._view(r).getInt8(e)},"readInt8"),readShort:p(function(r,e){return t._bin._view(r).getInt16(e)},"readShort"),readUshort:p(function(r,e){return t._bin._view(r).getUint16(e)},"readUshort"),readUshorts:p(function(r,e,a){for(var i=[],n=0;n<a;n++)i.push(t._bin.readUshort(r,e+2*n));return i},"readUshorts"),readUint:p(function(r,e){return t._bin._view(r).getUint32(e)},"readUint"),readUint64:p(function(r,e){return 4294967296*t._bin.readUint(r,e)+t._bin.readUint(r,e+4)},"readUint64"),readASCII:p(function(r,e,a){for(var i="",n=0;n<a;n++)i+=String.fromCharCode(r[e+n]);return i},"readASCII"),readUnicode:p(function(r,e,a){for(var i="",n=0;n<a;n++){var o=r[e++]<<8|r[e++];i+=String.fromCharCode(o)}return i},"readUnicode"),_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:p(function(r,e,a){var i=t._bin._tdec;return i&&e==0&&a==r.length?i.decode(r):t._bin.readASCII(r,e,a)},"readUTF8"),readBytes:p(function(r,e,a){for(var i=[],n=0;n<a;n++)i.push(r[e+n]);return i},"readBytes"),readASCIIArray:p(function(r,e,a){for(var i=[],n=0;n<a;n++)i.push(String.fromCharCode(r[e+n]));return i},"readASCIIArray"),_view:p(function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))},"_view")},t._lctf={},t._lctf.parse=function(r,e,a,i,n){var o=t._bin,s={},l=e;o.readFixed(r,e),e+=4;var u=o.readUshort(r,e);e+=2;var f=o.readUshort(r,e);e+=2;var g=o.readUshort(r,e);return e+=2,s.scriptList=t._lctf.readScriptList(r,l+u),s.featureList=t._lctf.readFeatureList(r,l+f),s.lookupList=t._lctf.readLookupList(r,l+g,n),s},t._lctf.readLookupList=function(r,e,a){var i=t._bin,n=e,o=[],s=i.readUshort(r,e);e+=2;for(var l=0;l<s;l++){var u=i.readUshort(r,e);e+=2;var f=t._lctf.readLookupTable(r,n+u,a);o.push(f)}return o},t._lctf.readLookupTable=function(r,e,a){var i=t._bin,n=e,o={tabs:[]};o.ltype=i.readUshort(r,e),e+=2,o.flag=i.readUshort(r,e),e+=2;var s=i.readUshort(r,e);e+=2;for(var l=o.ltype,u=0;u<s;u++){var f=i.readUshort(r,e);e+=2;var g=a(r,l,n+f,o);o.tabs.push(g)}return o},t._lctf.numOfOnes=function(r){for(var e=0,a=0;a<32;a++)(r>>>a&1)!=0&&e++;return e},t._lctf.readClassDef=function(r,e){var a=t._bin,i=[],n=a.readUshort(r,e);if(e+=2,n==1){var o=a.readUshort(r,e);e+=2;var s=a.readUshort(r,e);e+=2;for(var l=0;l<s;l++)i.push(o+l),i.push(o+l),i.push(a.readUshort(r,e)),e+=2}if(n==2){var u=a.readUshort(r,e);for(e+=2,l=0;l<u;l++)i.push(a.readUshort(r,e)),e+=2,i.push(a.readUshort(r,e)),e+=2,i.push(a.readUshort(r,e)),e+=2}return i},t._lctf.getInterval=function(r,e){for(var a=0;a<r.length;a+=3){var i=r[a],n=r[a+1];if(r[a+2],i<=e&&e<=n)return a}return-1},t._lctf.readCoverage=function(r,e){var a=t._bin,i={};i.fmt=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);return e+=2,i.fmt==1&&(i.tab=a.readUshorts(r,e,n)),i.fmt==2&&(i.tab=a.readUshorts(r,e,3*n)),i},t._lctf.coverageIndex=function(r,e){var a=r.tab;if(r.fmt==1)return a.indexOf(e);if(r.fmt==2){var i=t._lctf.getInterval(a,e);if(i!=-1)return a[i+2]+(e-a[i])}return-1},t._lctf.readFeatureList=function(r,e){var a=t._bin,i=e,n=[],o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var l=a.readASCII(r,e,4);e+=4;var u=a.readUshort(r,e);e+=2;var f=t._lctf.readFeatureTable(r,i+u);f.tag=l.trim(),n.push(f)}return n},t._lctf.readFeatureTable=function(r,e){var a=t._bin,i=e,n={},o=a.readUshort(r,e);e+=2,o>0&&(n.featureParams=i+o);var s=a.readUshort(r,e);e+=2,n.tab=[];for(var l=0;l<s;l++)n.tab.push(a.readUshort(r,e+2*l));return n},t._lctf.readScriptList=function(r,e){var a=t._bin,i=e,n={},o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var l=a.readASCII(r,e,4);e+=4;var u=a.readUshort(r,e);e+=2,n[l.trim()]=t._lctf.readScriptTable(r,i+u)}return n},t._lctf.readScriptTable=function(r,e){var a=t._bin,i=e,n={},o=a.readUshort(r,e);e+=2,o>0&&(n.default=t._lctf.readLangSysTable(r,i+o));var s=a.readUshort(r,e);e+=2;for(var l=0;l<s;l++){var u=a.readASCII(r,e,4);e+=4;var f=a.readUshort(r,e);e+=2,n[u.trim()]=t._lctf.readLangSysTable(r,i+f)}return n},t._lctf.readLangSysTable=function(r,e){var a=t._bin,i={};a.readUshort(r,e),e+=2,i.reqFeature=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);return e+=2,i.features=a.readUshorts(r,e,n),i},t.CFF={},t.CFF.parse=function(r,e,a){var i=t._bin;(r=new Uint8Array(r.buffer,e,a))[e=0],r[++e],r[++e],r[++e],e++;var n=[];e=t.CFF.readIndex(r,e,n);for(var o=[],s=0;s<n.length-1;s++)o.push(i.readASCII(r,e+n[s],n[s+1]-n[s]));e+=n[n.length-1];var l=[];e=t.CFF.readIndex(r,e,l);var u=[];for(s=0;s<l.length-1;s++)u.push(t.CFF.readDict(r,e+l[s],e+l[s+1]));e+=l[l.length-1];var f=u[0],g=[];e=t.CFF.readIndex(r,e,g);var x=[];for(s=0;s<g.length-1;s++)x.push(i.readASCII(r,e+g[s],g[s+1]-g[s]));if(e+=g[g.length-1],t.CFF.readSubrs(r,e,f),f.CharStrings){e=f.CharStrings,g=[],e=t.CFF.readIndex(r,e,g);var m=[];for(s=0;s<g.length-1;s++)m.push(i.readBytes(r,e+g[s],g[s+1]-g[s]));f.CharStrings=m}if(f.ROS){e=f.FDArray;var T=[];for(e=t.CFF.readIndex(r,e,T),f.FDArray=[],s=0;s<T.length-1;s++){var C=t.CFF.readDict(r,e+T[s],e+T[s+1]);t.CFF._readFDict(r,C,x),f.FDArray.push(C)}e+=T[T.length-1],e=f.FDSelect,f.FDSelect=[];var _=r[e];if(e++,_!=3)throw _;var b=i.readUshort(r,e);for(e+=2,s=0;s<b+1;s++)f.FDSelect.push(i.readUshort(r,e),r[e+2]),e+=3}return f.Encoding&&(f.Encoding=t.CFF.readEncoding(r,f.Encoding,f.CharStrings.length)),f.charset&&(f.charset=t.CFF.readCharset(r,f.charset,f.CharStrings.length)),t.CFF._readFDict(r,f,x),f},t.CFF._readFDict=function(r,e,a){var i;for(var n in e.Private&&(i=e.Private[1],e.Private=t.CFF.readDict(r,i,i+e.Private[0]),e.Private.Subrs&&t.CFF.readSubrs(r,i+e.Private.Subrs,e.Private)),e)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(n)!=-1&&(e[n]=a[e[n]-426+35])},t.CFF.readSubrs=function(r,e,a){var i=t._bin,n=[];e=t.CFF.readIndex(r,e,n);var o,s=n.length;o=s<1240?107:s<33900?1131:32768,a.Bias=o,a.Subrs=[];for(var l=0;l<n.length-1;l++)a.Subrs.push(i.readBytes(r,e+n[l],n[l+1]-n[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(r,e){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==e)return a;return-1},t.CFF.glyphBySE=function(r,e){return e<0||e>255?-1:t.CFF.glyphByUnicode(r,t.CFF.tableSE[e])},t.CFF.readEncoding=function(r,e,a){t._bin;var i=[".notdef"],n=r[e];if(e++,n!=0)throw"error: unknown encoding format: "+n;var o=r[e];e++;for(var s=0;s<o;s++)i.push(r[e+s]);return i},t.CFF.readCharset=function(r,e,a){var i=t._bin,n=[".notdef"],o=r[e];if(e++,o==0)for(var s=0;s<a;s++){var l=i.readUshort(r,e);e+=2,n.push(l)}else{if(o!=1&&o!=2)throw"error: format: "+o;for(;n.length<a;){l=i.readUshort(r,e),e+=2;var u=0;for(o==1?(u=r[e],e++):(u=i.readUshort(r,e),e+=2),s=0;s<=u;s++)n.push(l),l++}}return n},t.CFF.readIndex=function(r,e,a){var i=t._bin,n=i.readUshort(r,e)+1,o=r[e+=2];if(e++,o==1)for(var s=0;s<n;s++)a.push(r[e+s]);else if(o==2)for(s=0;s<n;s++)a.push(i.readUshort(r,e+2*s));else if(o==3)for(s=0;s<n;s++)a.push(16777215&i.readUint(r,e+3*s-1));else if(n!=1)throw"unsupported offset size: "+o+", count: "+n;return(e+=n*o)-1},t.CFF.getCharString=function(r,e,a){var i=t._bin,n=r[e],o=r[e+1];r[e+2],r[e+3],r[e+4];var s=1,l=null,u=null;n<=20&&(l=n,s=1),n==12&&(l=100*n+o,s=2),21<=n&&n<=27&&(l=n,s=1),n==28&&(u=i.readShort(r,e+1),s=3),29<=n&&n<=31&&(l=n,s=1),32<=n&&n<=246&&(u=n-139,s=1),247<=n&&n<=250&&(u=256*(n-247)+o+108,s=2),251<=n&&n<=254&&(u=256*-(n-251)-o-108,s=2),n==255&&(u=i.readInt(r,e+1)/65535,s=5),a.val=u??"o"+l,a.size=s},t.CFF.readCharString=function(r,e,a){for(var i=e+a,n=t._bin,o=[];e<i;){var s=r[e],l=r[e+1];r[e+2],r[e+3],r[e+4];var u=1,f=null,g=null;s<=20&&(f=s,u=1),s==12&&(f=100*s+l,u=2),s!=19&&s!=20||(f=s,u=2),21<=s&&s<=27&&(f=s,u=1),s==28&&(g=n.readShort(r,e+1),u=3),29<=s&&s<=31&&(f=s,u=1),32<=s&&s<=246&&(g=s-139,u=1),247<=s&&s<=250&&(g=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(g=256*-(s-251)-l-108,u=2),s==255&&(g=n.readInt(r,e+1)/65535,u=5),o.push(g??"o"+f),e+=u}return o},t.CFF.readDict=function(r,e,a){for(var i=t._bin,n={},o=[];e<a;){var s=r[e],l=r[e+1];r[e+2],r[e+3],r[e+4];var u=1,f=null,g=null;if(s==28&&(g=i.readShort(r,e+1),u=3),s==29&&(g=i.readInt(r,e+1),u=5),32<=s&&s<=246&&(g=s-139,u=1),247<=s&&s<=250&&(g=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(g=256*-(s-251)-l-108,u=2),s==255)throw g=i.readInt(r,e+1)/65535,u=5,"unknown number";if(s==30){var x=[];for(u=1;;){var m=r[e+u];u++;var T=m>>4,C=15&m;if(T!=15&&x.push(T),C!=15&&x.push(C),C==15)break}for(var _="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],U=0;U<x.length;U++)_+=b[x[U]];g=parseFloat(_)}s<=21&&(f=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,s==12&&(f=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2)),f!=null?(n[f]=o.length==1?o[0]:o,o=[]):o.push(g),e+=u}return n},t.cmap={},t.cmap.parse=function(r,e,a){r=new Uint8Array(r.buffer,e,a),e=0;var i=t._bin,n={};i.readUshort(r,e),e+=2;var o=i.readUshort(r,e);e+=2;var s=[];n.tables=[];for(var l=0;l<o;l++){var u=i.readUshort(r,e);e+=2;var f=i.readUshort(r,e);e+=2;var g=i.readUint(r,e);e+=4;var x="p"+u+"e"+f,m=s.indexOf(g);if(m==-1){var T;m=n.tables.length,s.push(g);var C=i.readUshort(r,g);C==0?T=t.cmap.parse0(r,g):C==4?T=t.cmap.parse4(r,g):C==6?T=t.cmap.parse6(r,g):C==12?T=t.cmap.parse12(r,g):console.debug("unknown format: "+C,u,f,g),n.tables.push(T)}if(n[x]!=null)throw"multiple tables for one platform+encoding";n[x]=m}return n},t.cmap.parse0=function(r,e){var a=t._bin,i={};i.format=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2,a.readUshort(r,e),e+=2,i.map=[];for(var o=0;o<n-6;o++)i.map.push(r[e+o]);return i},t.cmap.parse4=function(r,e){var a=t._bin,i=e,n={};n.format=a.readUshort(r,e),e+=2;var o=a.readUshort(r,e);e+=2,a.readUshort(r,e),e+=2;var s=a.readUshort(r,e);e+=2;var l=s/2;n.searchRange=a.readUshort(r,e),e+=2,n.entrySelector=a.readUshort(r,e),e+=2,n.rangeShift=a.readUshort(r,e),e+=2,n.endCount=a.readUshorts(r,e,l),e+=2*l,e+=2,n.startCount=a.readUshorts(r,e,l),e+=2*l,n.idDelta=[];for(var u=0;u<l;u++)n.idDelta.push(a.readShort(r,e)),e+=2;for(n.idRangeOffset=a.readUshorts(r,e,l),e+=2*l,n.glyphIdArray=[];e<i+o;)n.glyphIdArray.push(a.readUshort(r,e)),e+=2;return n},t.cmap.parse6=function(r,e){var a=t._bin,i={};i.format=a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2,a.readUshort(r,e),e+=2,i.firstCode=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2,i.glyphIdArray=[];for(var o=0;o<n;o++)i.glyphIdArray.push(a.readUshort(r,e)),e+=2;return i},t.cmap.parse12=function(r,e){var a=t._bin,i={};i.format=a.readUshort(r,e),e+=2,e+=2,a.readUint(r,e),e+=4,a.readUint(r,e),e+=4;var n=a.readUint(r,e);e+=4,i.groups=[];for(var o=0;o<n;o++){var s=e+12*o,l=a.readUint(r,s+0),u=a.readUint(r,s+4),f=a.readUint(r,s+8);i.groups.push([l,u,f])}return i},t.glyf={},t.glyf.parse=function(r,e,a,i){for(var n=[],o=0;o<i.maxp.numGlyphs;o++)n.push(null);return n},t.glyf._parseGlyf=function(r,e){var a=t._bin,i=r._data,n=t._tabOffset(i,"glyf",r._offset)+r.loca[e];if(r.loca[e]==r.loca[e+1])return null;var o={};if(o.noc=a.readShort(i,n),n+=2,o.xMin=a.readShort(i,n),n+=2,o.yMin=a.readShort(i,n),n+=2,o.xMax=a.readShort(i,n),n+=2,o.yMax=a.readShort(i,n),n+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var s=0;s<o.noc;s++)o.endPts.push(a.readUshort(i,n)),n+=2;var l=a.readUshort(i,n);if(n+=2,i.length-n<l)return null;o.instructions=a.readBytes(i,n,l),n+=l;var u=o.endPts[o.noc-1]+1;for(o.flags=[],s=0;s<u;s++){var f=i[n];if(n++,o.flags.push(f),(8&f)!=0){var g=i[n];n++;for(var x=0;x<g;x++)o.flags.push(f),s++}}for(o.xs=[],s=0;s<u;s++){var m=(2&o.flags[s])!=0,T=(16&o.flags[s])!=0;m?(o.xs.push(T?i[n]:-i[n]),n++):T?o.xs.push(0):(o.xs.push(a.readShort(i,n)),n+=2)}for(o.ys=[],s=0;s<u;s++)m=(4&o.flags[s])!=0,T=(32&o.flags[s])!=0,m?(o.ys.push(T?i[n]:-i[n]),n++):T?o.ys.push(0):(o.ys.push(a.readShort(i,n)),n+=2);var C=0,_=0;for(s=0;s<u;s++)C+=o.xs[s],_+=o.ys[s],o.xs[s]=C,o.ys[s]=_}else{var b;o.parts=[];do{b=a.readUshort(i,n),n+=2;var U={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(U),U.glyphIndex=a.readUshort(i,n),n+=2,1&b){var E=a.readShort(i,n);n+=2;var S=a.readShort(i,n);n+=2}else E=a.readInt8(i,n),n++,S=a.readInt8(i,n),n++;2&b?(U.m.tx=E,U.m.ty=S):(U.p1=E,U.p2=S),8&b?(U.m.a=U.m.d=a.readF2dot14(i,n),n+=2):64&b?(U.m.a=a.readF2dot14(i,n),n+=2,U.m.d=a.readF2dot14(i,n),n+=2):128&b&&(U.m.a=a.readF2dot14(i,n),n+=2,U.m.b=a.readF2dot14(i,n),n+=2,U.m.c=a.readF2dot14(i,n),n+=2,U.m.d=a.readF2dot14(i,n),n+=2)}while(32&b);if(256&b){var F=a.readUshort(i,n);for(n+=2,o.instr=[],s=0;s<F;s++)o.instr.push(i[n]),n++}}return o},t.GDEF={},t.GDEF.parse=function(r,e,a,i){var n=e;e+=4;var o=t._bin.readUshort(r,e);return{glyphClassDef:o===0?null:t._lctf.readClassDef(r,n+o)}},t.GPOS={},t.GPOS.parse=function(r,e,a,i){return t._lctf.parse(r,e,a,i,t.GPOS.subt)},t.GPOS.subt=function(r,e,a,i){var n=t._bin,o=a,s={};if(s.fmt=n.readUshort(r,a),a+=2,e==1||e==2||e==3||e==7||e==8&&s.fmt<=2){var l=n.readUshort(r,a);a+=2,s.coverage=t._lctf.readCoverage(r,l+o)}if(e==1&&s.fmt==1){var u=n.readUshort(r,a);a+=2,u!=0&&(s.pos=t.GPOS.readValueRecord(r,a,u))}else if(e==2&&s.fmt>=1&&s.fmt<=2){u=n.readUshort(r,a),a+=2;var f=n.readUshort(r,a);a+=2;var g=t._lctf.numOfOnes(u),x=t._lctf.numOfOnes(f);if(s.fmt==1){s.pairsets=[];var m=n.readUshort(r,a);a+=2;for(var T=0;T<m;T++){var C=o+n.readUshort(r,a);a+=2;var _=n.readUshort(r,C);C+=2;for(var b=[],U=0;U<_;U++){var E=n.readUshort(r,C);C+=2,u!=0&&(y=t.GPOS.readValueRecord(r,C,u),C+=2*g),f!=0&&(M=t.GPOS.readValueRecord(r,C,f),C+=2*x),b.push({gid2:E,val1:y,val2:M})}s.pairsets.push(b)}}if(s.fmt==2){var S=n.readUshort(r,a);a+=2;var F=n.readUshort(r,a);a+=2;var P=n.readUshort(r,a);a+=2;var I=n.readUshort(r,a);for(a+=2,s.classDef1=t._lctf.readClassDef(r,o+S),s.classDef2=t._lctf.readClassDef(r,o+F),s.matrix=[],T=0;T<P;T++){var H=[];for(U=0;U<I;U++){var y=null,M=null;u!=0&&(y=t.GPOS.readValueRecord(r,a,u),a+=2*g),f!=0&&(M=t.GPOS.readValueRecord(r,a,f),a+=2*x),H.push({val1:y,val2:M})}s.matrix.push(H)}}}else if(e==4&&s.fmt==1)s.markCoverage=t._lctf.readCoverage(r,n.readUshort(r,a)+o),s.baseCoverage=t._lctf.readCoverage(r,n.readUshort(r,a+2)+o),s.markClassCount=n.readUshort(r,a+4),s.markArray=t.GPOS.readMarkArray(r,n.readUshort(r,a+6)+o),s.baseArray=t.GPOS.readBaseArray(r,n.readUshort(r,a+8)+o,s.markClassCount);else if(e==6&&s.fmt==1)s.mark1Coverage=t._lctf.readCoverage(r,n.readUshort(r,a)+o),s.mark2Coverage=t._lctf.readCoverage(r,n.readUshort(r,a+2)+o),s.markClassCount=n.readUshort(r,a+4),s.mark1Array=t.GPOS.readMarkArray(r,n.readUshort(r,a+6)+o),s.mark2Array=t.GPOS.readBaseArray(r,n.readUshort(r,a+8)+o,s.markClassCount);else{if(e==9&&s.fmt==1){var O=n.readUshort(r,a);a+=2;var q=n.readUint(r,a);if(a+=4,i.ltype==9)i.ltype=O;else if(i.ltype!=O)throw"invalid extension substitution";return t.GPOS.subt(r,i.ltype,o+q)}console.debug("unsupported GPOS table LookupType",e,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(r,e,a){var i=t._bin,n=[];return n.push(1&a?i.readShort(r,e):0),e+=1&a?2:0,n.push(2&a?i.readShort(r,e):0),e+=2&a?2:0,n.push(4&a?i.readShort(r,e):0),e+=4&a?2:0,n.push(8&a?i.readShort(r,e):0),e+=8&a?2:0,n},t.GPOS.readBaseArray=function(r,e,a){var i=t._bin,n=[],o=e,s=i.readUshort(r,e);e+=2;for(var l=0;l<s;l++){for(var u=[],f=0;f<a;f++)u.push(t.GPOS.readAnchorRecord(r,o+i.readUshort(r,e))),e+=2;n.push(u)}return n},t.GPOS.readMarkArray=function(r,e){var a=t._bin,i=[],n=e,o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var l=t.GPOS.readAnchorRecord(r,a.readUshort(r,e+2)+n);l.markClass=a.readUshort(r,e),i.push(l),e+=4}return i},t.GPOS.readAnchorRecord=function(r,e){var a=t._bin,i={};return i.fmt=a.readUshort(r,e),i.x=a.readShort(r,e+2),i.y=a.readShort(r,e+4),i},t.GSUB={},t.GSUB.parse=function(r,e,a,i){return t._lctf.parse(r,e,a,i,t.GSUB.subt)},t.GSUB.subt=function(r,e,a,i){var n=t._bin,o=a,s={};if(s.fmt=n.readUshort(r,a),a+=2,e!=1&&e!=2&&e!=4&&e!=5&&e!=6)return null;if(e==1||e==2||e==4||e==5&&s.fmt<=2||e==6&&s.fmt<=2){var l=n.readUshort(r,a);a+=2,s.coverage=t._lctf.readCoverage(r,o+l)}if(e==1&&s.fmt>=1&&s.fmt<=2){if(s.fmt==1)s.delta=n.readShort(r,a),a+=2;else if(s.fmt==2){var u=n.readUshort(r,a);a+=2,s.newg=n.readUshorts(r,a,u),a+=2*s.newg.length}}else if(e==2&&s.fmt==1){u=n.readUshort(r,a),a+=2,s.seqs=[];for(var f=0;f<u;f++){var g=n.readUshort(r,a)+o;a+=2;var x=n.readUshort(r,g);s.seqs.push(n.readUshorts(r,g+2,x))}}else if(e==4)for(s.vals=[],u=n.readUshort(r,a),a+=2,f=0;f<u;f++){var m=n.readUshort(r,a);a+=2,s.vals.push(t.GSUB.readLigatureSet(r,o+m))}else if(e==5&&s.fmt==2){if(s.fmt==2){var T=n.readUshort(r,a);a+=2,s.cDef=t._lctf.readClassDef(r,o+T),s.scset=[];var C=n.readUshort(r,a);for(a+=2,f=0;f<C;f++){var _=n.readUshort(r,a);a+=2,s.scset.push(_==0?null:t.GSUB.readSubClassSet(r,o+_))}}}else if(e==6&&s.fmt==3){if(s.fmt==3){for(f=0;f<3;f++){u=n.readUshort(r,a),a+=2;for(var b=[],U=0;U<u;U++)b.push(t._lctf.readCoverage(r,o+n.readUshort(r,a+2*U)));a+=2*u,f==0&&(s.backCvg=b),f==1&&(s.inptCvg=b),f==2&&(s.ahedCvg=b)}u=n.readUshort(r,a),a+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(r,a,u)}}else{if(e==7&&s.fmt==1){var E=n.readUshort(r,a);a+=2;var S=n.readUint(r,a);if(a+=4,i.ltype==9)i.ltype=E;else if(i.ltype!=E)throw"invalid extension substitution";return t.GSUB.subt(r,i.ltype,o+S)}console.debug("unsupported GSUB table LookupType",e,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(r,e){var a=t._bin.readUshort,i=e,n=[],o=a(r,e);e+=2;for(var s=0;s<o;s++){var l=a(r,e);e+=2,n.push(t.GSUB.readSubClassRule(r,i+l))}return n},t.GSUB.readSubClassRule=function(r,e){var a=t._bin.readUshort,i={},n=a(r,e),o=a(r,e+=2);e+=2,i.input=[];for(var s=0;s<n-1;s++)i.input.push(a(r,e)),e+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(r,e,o),i},t.GSUB.readSubstLookupRecords=function(r,e,a){for(var i=t._bin.readUshort,n=[],o=0;o<a;o++)n.push(i(r,e),i(r,e+2)),e+=4;return n},t.GSUB.readChainSubClassSet=function(r,e){var a=t._bin,i=e,n=[],o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var l=a.readUshort(r,e);e+=2,n.push(t.GSUB.readChainSubClassRule(r,i+l))}return n},t.GSUB.readChainSubClassRule=function(r,e){for(var a=t._bin,i={},n=["backtrack","input","lookahead"],o=0;o<n.length;o++){var s=a.readUshort(r,e);e+=2,o==1&&s--,i[n[o]]=a.readUshorts(r,e,s),e+=2*i[n[o]].length}return s=a.readUshort(r,e),e+=2,i.subst=a.readUshorts(r,e,2*s),e+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(r,e){var a=t._bin,i=e,n=[],o=a.readUshort(r,e);e+=2;for(var s=0;s<o;s++){var l=a.readUshort(r,e);e+=2,n.push(t.GSUB.readLigature(r,i+l))}return n},t.GSUB.readLigature=function(r,e){var a=t._bin,i={chain:[]};i.nglyph=a.readUshort(r,e),e+=2;var n=a.readUshort(r,e);e+=2;for(var o=0;o<n-1;o++)i.chain.push(a.readUshort(r,e)),e+=2;return i},t.head={},t.head.parse=function(r,e,a){var i=t._bin,n={};return i.readFixed(r,e),e+=4,n.fontRevision=i.readFixed(r,e),e+=4,i.readUint(r,e),e+=4,i.readUint(r,e),e+=4,n.flags=i.readUshort(r,e),e+=2,n.unitsPerEm=i.readUshort(r,e),e+=2,n.created=i.readUint64(r,e),e+=8,n.modified=i.readUint64(r,e),e+=8,n.xMin=i.readShort(r,e),e+=2,n.yMin=i.readShort(r,e),e+=2,n.xMax=i.readShort(r,e),e+=2,n.yMax=i.readShort(r,e),e+=2,n.macStyle=i.readUshort(r,e),e+=2,n.lowestRecPPEM=i.readUshort(r,e),e+=2,n.fontDirectionHint=i.readShort(r,e),e+=2,n.indexToLocFormat=i.readShort(r,e),e+=2,n.glyphDataFormat=i.readShort(r,e),e+=2,n},t.hhea={},t.hhea.parse=function(r,e,a){var i=t._bin,n={};return i.readFixed(r,e),e+=4,n.ascender=i.readShort(r,e),e+=2,n.descender=i.readShort(r,e),e+=2,n.lineGap=i.readShort(r,e),e+=2,n.advanceWidthMax=i.readUshort(r,e),e+=2,n.minLeftSideBearing=i.readShort(r,e),e+=2,n.minRightSideBearing=i.readShort(r,e),e+=2,n.xMaxExtent=i.readShort(r,e),e+=2,n.caretSlopeRise=i.readShort(r,e),e+=2,n.caretSlopeRun=i.readShort(r,e),e+=2,n.caretOffset=i.readShort(r,e),e+=2,e+=8,n.metricDataFormat=i.readShort(r,e),e+=2,n.numberOfHMetrics=i.readUshort(r,e),e+=2,n},t.hmtx={},t.hmtx.parse=function(r,e,a,i){for(var n=t._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(s=n.readUshort(r,e),e+=2,l=n.readShort(r,e),e+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},t.kern={},t.kern.parse=function(r,e,a,i){var n=t._bin,o=n.readUshort(r,e);if(e+=2,o==1)return t.kern.parseV1(r,e-2,a,i);var s=n.readUshort(r,e);e+=2;for(var l={glyph1:[],rval:[]},u=0;u<s;u++){e+=2,a=n.readUshort(r,e),e+=2;var f=n.readUshort(r,e);e+=2;var g=f>>>8;if((g&=15)!=0)throw"unknown kern table format: "+g;e=t.kern.readFormat0(r,e,l)}return l},t.kern.parseV1=function(r,e,a,i){var n=t._bin;n.readFixed(r,e),e+=4;var o=n.readUint(r,e);e+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){n.readUint(r,e),e+=4;var u=n.readUshort(r,e);e+=2,n.readUshort(r,e),e+=2;var f=u>>>8;if((f&=15)!=0)throw"unknown kern table format: "+f;e=t.kern.readFormat0(r,e,s)}return s},t.kern.readFormat0=function(r,e,a){var i=t._bin,n=-1,o=i.readUshort(r,e);e+=2,i.readUshort(r,e),e+=2,i.readUshort(r,e),e+=2,i.readUshort(r,e),e+=2;for(var s=0;s<o;s++){var l=i.readUshort(r,e);e+=2;var u=i.readUshort(r,e);e+=2;var f=i.readShort(r,e);e+=2,l!=n&&(a.glyph1.push(l),a.rval.push({glyph2:[],vals:[]}));var g=a.rval[a.rval.length-1];g.glyph2.push(u),g.vals.push(f),n=l}return e},t.loca={},t.loca.parse=function(r,e,a,i){var n=t._bin,o=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(s==0)for(var u=0;u<l;u++)o.push(n.readUshort(r,e+(u<<1))<<1);if(s==1)for(u=0;u<l;u++)o.push(n.readUint(r,e+(u<<2)));return o},t.maxp={},t.maxp.parse=function(r,e,a){var i=t._bin,n={},o=i.readUint(r,e);return e+=4,n.numGlyphs=i.readUshort(r,e),e+=2,o==65536&&(n.maxPoints=i.readUshort(r,e),e+=2,n.maxContours=i.readUshort(r,e),e+=2,n.maxCompositePoints=i.readUshort(r,e),e+=2,n.maxCompositeContours=i.readUshort(r,e),e+=2,n.maxZones=i.readUshort(r,e),e+=2,n.maxTwilightPoints=i.readUshort(r,e),e+=2,n.maxStorage=i.readUshort(r,e),e+=2,n.maxFunctionDefs=i.readUshort(r,e),e+=2,n.maxInstructionDefs=i.readUshort(r,e),e+=2,n.maxStackElements=i.readUshort(r,e),e+=2,n.maxSizeOfInstructions=i.readUshort(r,e),e+=2,n.maxComponentElements=i.readUshort(r,e),e+=2,n.maxComponentDepth=i.readUshort(r,e),e+=2),n},t.name={},t.name.parse=function(r,e,a){var i=t._bin,n={};i.readUshort(r,e),e+=2;var o=i.readUshort(r,e);e+=2,i.readUshort(r,e);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=e+=2,f=0;f<o;f++){var g=i.readUshort(r,e);e+=2;var x=i.readUshort(r,e);e+=2;var m=i.readUshort(r,e);e+=2;var T=i.readUshort(r,e);e+=2;var C=i.readUshort(r,e);e+=2;var _=i.readUshort(r,e);e+=2;var b,U=l[T],E=u+12*o+_;if(g==0)b=i.readUnicode(r,E,C/2);else if(g==3&&x==0)b=i.readUnicode(r,E,C/2);else if(x==0)b=i.readASCII(r,E,C);else if(x==1)b=i.readUnicode(r,E,C/2);else if(x==3)b=i.readUnicode(r,E,C/2);else{if(g!=1)throw"unknown encoding "+x+", platformID: "+g;b=i.readASCII(r,E,C),console.debug("reading unknown MAC encoding "+x+" as ASCII")}var S="p"+g+","+m.toString(16);n[S]==null&&(n[S]={}),n[S][U!==void 0?U:T]=b,n[S]._lang=m}for(var F in n)if(n[F].postScriptName!=null&&n[F]._lang==1033)return n[F];for(var F in n)if(n[F].postScriptName!=null&&n[F]._lang==0)return n[F];for(var F in n)if(n[F].postScriptName!=null&&n[F]._lang==3084)return n[F];for(var F in n)if(n[F].postScriptName!=null)return n[F];for(var F in n){s=F;break}return console.debug("returning name table with languageID "+n[s]._lang),n[s]},t["OS/2"]={},t["OS/2"].parse=function(r,e,a){var i=t._bin.readUshort(r,e);e+=2;var n={};if(i==0)t["OS/2"].version0(r,e,n);else if(i==1)t["OS/2"].version1(r,e,n);else if(i==2||i==3||i==4)t["OS/2"].version2(r,e,n);else{if(i!=5)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(r,e,n)}return n},t["OS/2"].version0=function(r,e,a){var i=t._bin;return a.xAvgCharWidth=i.readShort(r,e),e+=2,a.usWeightClass=i.readUshort(r,e),e+=2,a.usWidthClass=i.readUshort(r,e),e+=2,a.fsType=i.readUshort(r,e),e+=2,a.ySubscriptXSize=i.readShort(r,e),e+=2,a.ySubscriptYSize=i.readShort(r,e),e+=2,a.ySubscriptXOffset=i.readShort(r,e),e+=2,a.ySubscriptYOffset=i.readShort(r,e),e+=2,a.ySuperscriptXSize=i.readShort(r,e),e+=2,a.ySuperscriptYSize=i.readShort(r,e),e+=2,a.ySuperscriptXOffset=i.readShort(r,e),e+=2,a.ySuperscriptYOffset=i.readShort(r,e),e+=2,a.yStrikeoutSize=i.readShort(r,e),e+=2,a.yStrikeoutPosition=i.readShort(r,e),e+=2,a.sFamilyClass=i.readShort(r,e),e+=2,a.panose=i.readBytes(r,e,10),e+=10,a.ulUnicodeRange1=i.readUint(r,e),e+=4,a.ulUnicodeRange2=i.readUint(r,e),e+=4,a.ulUnicodeRange3=i.readUint(r,e),e+=4,a.ulUnicodeRange4=i.readUint(r,e),e+=4,a.achVendID=[i.readInt8(r,e),i.readInt8(r,e+1),i.readInt8(r,e+2),i.readInt8(r,e+3)],e+=4,a.fsSelection=i.readUshort(r,e),e+=2,a.usFirstCharIndex=i.readUshort(r,e),e+=2,a.usLastCharIndex=i.readUshort(r,e),e+=2,a.sTypoAscender=i.readShort(r,e),e+=2,a.sTypoDescender=i.readShort(r,e),e+=2,a.sTypoLineGap=i.readShort(r,e),e+=2,a.usWinAscent=i.readUshort(r,e),e+=2,a.usWinDescent=i.readUshort(r,e),e+=2},t["OS/2"].version1=function(r,e,a){var i=t._bin;return e=t["OS/2"].version0(r,e,a),a.ulCodePageRange1=i.readUint(r,e),e+=4,a.ulCodePageRange2=i.readUint(r,e),e+=4},t["OS/2"].version2=function(r,e,a){var i=t._bin;return e=t["OS/2"].version1(r,e,a),a.sxHeight=i.readShort(r,e),e+=2,a.sCapHeight=i.readShort(r,e),e+=2,a.usDefault=i.readUshort(r,e),e+=2,a.usBreak=i.readUshort(r,e),e+=2,a.usMaxContext=i.readUshort(r,e),e+=2},t["OS/2"].version5=function(r,e,a){var i=t._bin;return e=t["OS/2"].version2(r,e,a),a.usLowerOpticalPointSize=i.readUshort(r,e),e+=2,a.usUpperOpticalPointSize=i.readUshort(r,e),e+=2},t.post={},t.post.parse=function(r,e,a){var i=t._bin,n={};return n.version=i.readFixed(r,e),e+=4,n.italicAngle=i.readFixed(r,e),e+=4,n.underlinePosition=i.readShort(r,e),e+=2,n.underlineThickness=i.readShort(r,e),e+=2,n},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(r,e){var a=r.cmap,i=-1;if(a.p0e4!=null?i=a.p0e4:a.p3e1!=null?i=a.p3e1:a.p1e0!=null?i=a.p1e0:a.p0e3!=null&&(i=a.p0e3),i==-1)throw"no familiar platform and encoding!";var n=a.tables[i];if(n.format==0)return e>=n.map.length?0:n.map[e];if(n.format==4){for(var o=-1,s=0;s<n.endCount.length;s++)if(e<=n.endCount[s]){o=s;break}return o==-1||n.startCount[o]>e?0:65535&(n.idRangeOffset[o]!=0?n.glyphIdArray[e-n.startCount[o]+(n.idRangeOffset[o]>>1)-(n.idRangeOffset.length-o)]:e+n.idDelta[o])}if(n.format==12){if(e>n.groups[n.groups.length-1][1])return 0;for(s=0;s<n.groups.length;s++){var l=n.groups[s];if(l[0]<=e&&e<=l[1])return l[2]+(e-l[0])}return 0}throw"unknown cmap table format "+n.format},t.U.glyphToPath=function(r,e){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[e]){var i=r.SVG.entries[e];return i==null?a:(typeof i=="string"&&(i=t.SVG.toPath(i),r.SVG.entries[e]=i),i)}if(r.CFF){var n={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},o=r.CFF,s=r.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=e;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}t.U._drawCFF(r.CFF.CharStrings[e],n,o,s,a)}else r.glyf&&t.U._drawGlyf(e,r,a);return a},t.U._drawGlyf=function(r,e,a){var i=e.glyf[r];i==null&&(i=e.glyf[r]=t.glyf._parseGlyf(e,r)),i!=null&&(i.noc>-1?t.U._simpleGlyph(i,a):t.U._compoGlyph(i,e,a))},t.U._simpleGlyph=function(r,e){for(var a=0;a<r.noc;a++){for(var i=a==0?0:r.endPts[a-1]+1,n=r.endPts[a],o=i;o<=n;o++){var s=o==i?n:o-1,l=o==n?i:o+1,u=1&r.flags[o],f=1&r.flags[s],g=1&r.flags[l],x=r.xs[o],m=r.ys[o];if(o==i)if(u){if(!f){t.U.P.moveTo(e,x,m);continue}t.U.P.moveTo(e,r.xs[s],r.ys[s])}else f?t.U.P.moveTo(e,r.xs[s],r.ys[s]):t.U.P.moveTo(e,(r.xs[s]+x)/2,(r.ys[s]+m)/2);u?f&&t.U.P.lineTo(e,x,m):g?t.U.P.qcurveTo(e,x,m,r.xs[l],r.ys[l]):t.U.P.qcurveTo(e,x,m,(x+r.xs[l])/2,(m+r.ys[l])/2)}t.U.P.closePath(e)}},t.U._compoGlyph=function(r,e,a){for(var i=0;i<r.parts.length;i++){var n={cmds:[],crds:[]},o=r.parts[i];t.U._drawGlyf(o.glyphIndex,e,n);for(var s=o.m,l=0;l<n.crds.length;l+=2){var u=n.crds[l],f=n.crds[l+1];a.crds.push(u*s.a+f*s.b+s.tx),a.crds.push(u*s.c+f*s.d+s.ty)}for(l=0;l<n.cmds.length;l++)a.cmds.push(n.cmds[l])}},t.U._getGlyphClass=function(r,e){var a=t._lctf.getInterval(e,r);return a==-1?0:e[a+2]},t.U._applySubs=function(r,e,a,i){for(var n=r.length-e-1,o=0;o<a.tabs.length;o++)if(a.tabs[o]!=null){var s,l=a.tabs[o];if(!l.coverage||(s=t._lctf.coverageIndex(l.coverage,r[e]))!=-1){if(a.ltype==1)r[e],l.fmt==1?r[e]=r[e]+l.delta:r[e]=l.newg[s];else if(a.ltype==4)for(var u=l.vals[s],f=0;f<u.length;f++){var g=u[f],x=g.chain.length;if(!(x>n)){for(var m=!0,T=0,C=0;C<x;C++){for(;r[e+T+(1+C)]==-1;)T++;g.chain[C]!=r[e+T+(1+C)]&&(m=!1)}if(m){for(r[e]=g.nglyph,C=0;C<x+T;C++)r[e+C+1]=-1;break}}}else if(a.ltype==5&&l.fmt==2)for(var _=t._lctf.getInterval(l.cDef,r[e]),b=l.cDef[_+2],U=l.scset[b],E=0;E<U.length;E++){var S=U[E],F=S.input;if(!(F.length>n)){for(m=!0,C=0;C<F.length;C++){var P=t._lctf.getInterval(l.cDef,r[e+1+C]);if(_==-1&&l.cDef[P+2]!=F[C]){m=!1;break}}if(m){var I=S.substLookupRecords;for(f=0;f<I.length;f+=2)I[f],I[f+1]}}}else if(a.ltype==6&&l.fmt==3){if(!t.U._glsCovered(r,l.backCvg,e-l.backCvg.length)||!t.U._glsCovered(r,l.inptCvg,e)||!t.U._glsCovered(r,l.ahedCvg,e+l.inptCvg.length))continue;var H=l.lookupRec;for(E=0;E<H.length;E+=2){_=H[E];var y=i[H[E+1]];t.U._applySubs(r,e+_,y,i)}}}}},t.U._glsCovered=function(r,e,a){for(var i=0;i<e.length;i++)if(t._lctf.coverageIndex(e[i],r[a+i])==-1)return!1;return!0},t.U.glyphsToPath=function(r,e,a){for(var i={cmds:[],crds:[]},n=0,o=0;o<e.length;o++){var s=e[o];if(s!=-1){for(var l=o<e.length-1&&e[o+1]!=-1?e[o+1]:0,u=t.U.glyphToPath(r,s),f=0;f<u.crds.length;f+=2)i.crds.push(u.crds[f]+n),i.crds.push(u.crds[f+1]);for(a&&i.cmds.push(a),f=0;f<u.cmds.length;f++)i.cmds.push(u.cmds[f]);a&&i.cmds.push("X"),n+=r.hmtx.aWidth[s],o<e.length-1&&(n+=t.U.getPairAdjustment(r,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(r,e,a){r.cmds.push("M"),r.crds.push(e,a)},t.U.P.lineTo=function(r,e,a){r.cmds.push("L"),r.crds.push(e,a)},t.U.P.curveTo=function(r,e,a,i,n,o,s){r.cmds.push("C"),r.crds.push(e,a,i,n,o,s)},t.U.P.qcurveTo=function(r,e,a,i,n){r.cmds.push("Q"),r.crds.push(e,a,i,n)},t.U.P.closePath=function(r){r.cmds.push("Z")},t.U._drawCFF=function(r,e,a,i,n){for(var o=e.stack,s=e.nStems,l=e.haveWidth,u=e.width,f=e.open,g=0,x=e.x,m=e.y,T=0,C=0,_=0,b=0,U=0,E=0,S=0,F=0,P=0,I=0,H={val:0,size:0};g<r.length;){t.CFF.getCharString(r,g,H);var y=H.val;if(g+=H.size,y=="o1"||y=="o18")o.length%2!=0&&!l&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if(y=="o3"||y=="o23")o.length%2!=0&&!l&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if(y=="o4")o.length>1&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),f&&t.U.P.closePath(n),m+=o.pop(),t.U.P.moveTo(n,x,m),f=!0;else if(y=="o5")for(;o.length>0;)x+=o.shift(),m+=o.shift(),t.U.P.lineTo(n,x,m);else if(y=="o6"||y=="o7")for(var M=o.length,O=y=="o6",q=0;q<M;q++){var W=o.shift();O?x+=W:m+=W,O=!O,t.U.P.lineTo(n,x,m)}else if(y=="o8"||y=="o24"){M=o.length;for(var te=0;te+6<=M;)T=x+o.shift(),C=m+o.shift(),_=T+o.shift(),b=C+o.shift(),x=_+o.shift(),m=b+o.shift(),t.U.P.curveTo(n,T,C,_,b,x,m),te+=6;y=="o24"&&(x+=o.shift(),m+=o.shift(),t.U.P.lineTo(n,x,m))}else{if(y=="o11")break;if(y=="o1234"||y=="o1235"||y=="o1236"||y=="o1237")y=="o1234"&&(C=m,_=(T=x+o.shift())+o.shift(),I=b=C+o.shift(),E=b,F=m,x=(S=(U=(P=_+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(n,T,C,_,b,P,I),t.U.P.curveTo(n,U,E,S,F,x,m)),y=="o1235"&&(T=x+o.shift(),C=m+o.shift(),_=T+o.shift(),b=C+o.shift(),P=_+o.shift(),I=b+o.shift(),U=P+o.shift(),E=I+o.shift(),S=U+o.shift(),F=E+o.shift(),x=S+o.shift(),m=F+o.shift(),o.shift(),t.U.P.curveTo(n,T,C,_,b,P,I),t.U.P.curveTo(n,U,E,S,F,x,m)),y=="o1236"&&(T=x+o.shift(),C=m+o.shift(),_=T+o.shift(),I=b=C+o.shift(),E=b,S=(U=(P=_+o.shift())+o.shift())+o.shift(),F=E+o.shift(),x=S+o.shift(),t.U.P.curveTo(n,T,C,_,b,P,I),t.U.P.curveTo(n,U,E,S,F,x,m)),y=="o1237"&&(T=x+o.shift(),C=m+o.shift(),_=T+o.shift(),b=C+o.shift(),P=_+o.shift(),I=b+o.shift(),U=P+o.shift(),E=I+o.shift(),S=U+o.shift(),F=E+o.shift(),Math.abs(S-x)>Math.abs(F-m)?x=S+o.shift():m=F+o.shift(),t.U.P.curveTo(n,T,C,_,b,P,I),t.U.P.curveTo(n,U,E,S,F,x,m));else if(y=="o14"){if(o.length>0&&!l&&(u=o.shift()+a.nominalWidthX,l=!0),o.length==4){var ie=o.shift(),L=o.shift(),B=o.shift(),v=o.shift(),k=t.CFF.glyphBySE(a,B),D=t.CFF.glyphBySE(a,v);t.U._drawCFF(a.CharStrings[k],e,a,i,n),e.x=ie,e.y=L,t.U._drawCFF(a.CharStrings[D],e,a,i,n)}f&&(t.U.P.closePath(n),f=!1)}else if(y=="o19"||y=="o20")o.length%2!=0&&!l&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,g+=s+7>>3;else if(y=="o21")o.length>2&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),m+=o.pop(),x+=o.pop(),f&&t.U.P.closePath(n),t.U.P.moveTo(n,x,m),f=!0;else if(y=="o22")o.length>1&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),x+=o.pop(),f&&t.U.P.closePath(n),t.U.P.moveTo(n,x,m),f=!0;else if(y=="o25"){for(;o.length>6;)x+=o.shift(),m+=o.shift(),t.U.P.lineTo(n,x,m);T=x+o.shift(),C=m+o.shift(),_=T+o.shift(),b=C+o.shift(),x=_+o.shift(),m=b+o.shift(),t.U.P.curveTo(n,T,C,_,b,x,m)}else if(y=="o26")for(o.length%2&&(x+=o.shift());o.length>0;)T=x,C=m+o.shift(),x=_=T+o.shift(),m=(b=C+o.shift())+o.shift(),t.U.P.curveTo(n,T,C,_,b,x,m);else if(y=="o27")for(o.length%2&&(m+=o.shift());o.length>0;)C=m,_=(T=x+o.shift())+o.shift(),b=C+o.shift(),x=_+o.shift(),m=b,t.U.P.curveTo(n,T,C,_,b,x,m);else if(y=="o10"||y=="o29"){var A=y=="o10"?i:a;if(o.length==0)console.debug("error: empty stack");else{var w=o.pop(),j=A.Subrs[w+A.Bias];e.x=x,e.y=m,e.nStems=s,e.haveWidth=l,e.width=u,e.open=f,t.U._drawCFF(j,e,a,i,n),x=e.x,m=e.y,s=e.nStems,l=e.haveWidth,u=e.width,f=e.open}}else if(y=="o30"||y=="o31"){var R=o.length,z=(te=0,y=="o31");for(te+=R-(M=-3&R);te<M;)z?(C=m,_=(T=x+o.shift())+o.shift(),m=(b=C+o.shift())+o.shift(),M-te==5?(x=_+o.shift(),te++):x=_,z=!1):(T=x,C=m+o.shift(),_=T+o.shift(),b=C+o.shift(),x=_+o.shift(),M-te==5?(m=b+o.shift(),te++):m=b,z=!0),t.U.P.curveTo(n,T,C,_,b,x,m),te+=4}else{if((y+"").charAt(0)=="o")throw console.debug("Unknown operation: "+y,r),y;o.push(y)}}}e.x=x,e.y=m,e.nStems=s,e.haveWidth=l,e.width=u,e.open=f};var d=t,c={Typr:d};return h.Typr=d,h.default=c,Object.defineProperty(h,"__esModule",{value:!0}),h}({}).Typr}p(Nn,"typrFactory");function Vn(){return function(h){var t=Uint8Array,d=Uint16Array,c=Uint32Array,r=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),i=p(function(y,M){for(var O=new d(31),q=0;q<31;++q)O[q]=M+=1<<y[q-1];var W=new c(O[30]);for(q=1;q<30;++q)for(var te=O[q];te<O[q+1];++te)W[te]=te-O[q]<<5|q;return[O,W]},"f"),n=i(r,2),o=n[0],s=n[1];o[28]=258,s[258]=28;for(var l=i(e,0)[0],u=new d(32768),f=0;f<32768;++f){var g=(43690&f)>>>1|(21845&f)<<1;g=(61680&(g=(52428&g)>>>2|(13107&g)<<2))>>>4|(3855&g)<<4,u[f]=((65280&g)>>>8|(255&g)<<8)>>>1}var x=p(function(y,M,O){for(var q=y.length,W=0,te=new d(M);W<q;++W)++te[y[W]-1];var ie,L=new d(M);for(W=0;W<M;++W)L[W]=L[W-1]+te[W-1]<<1;if(O){ie=new d(1<<M);var B=15-M;for(W=0;W<q;++W)if(y[W])for(var v=W<<4|y[W],k=M-y[W],D=L[y[W]-1]++<<k,A=D|(1<<k)-1;D<=A;++D)ie[u[D]>>>B]=v}else for(ie=new d(q),W=0;W<q;++W)y[W]&&(ie[W]=u[L[y[W]-1]++]>>>15-y[W]);return ie},"w"),m=new t(288);for(f=0;f<144;++f)m[f]=8;for(f=144;f<256;++f)m[f]=9;for(f=256;f<280;++f)m[f]=7;for(f=280;f<288;++f)m[f]=8;var T=new t(32);for(f=0;f<32;++f)T[f]=5;var C=x(m,9,1),_=x(T,5,1),b=p(function(y){for(var M=y[0],O=1;O<y.length;++O)y[O]>M&&(M=y[O]);return M},"y"),U=p(function(y,M,O){var q=M/8|0;return(y[q]|y[q+1]<<8)>>(7&M)&O},"L"),E=p(function(y,M){var O=M/8|0;return(y[O]|y[O+1]<<8|y[O+2]<<16)>>(7&M)},"U"),S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],F=p(function(y,M,O){var q=new Error(M||S[y]);if(q.code=y,Error.captureStackTrace&&Error.captureStackTrace(q,F),!O)throw q;return q},"T"),P=p(function(y,M,O){var q=y.length;if(!q||O&&!O.l&&q<5)return M||new t(0);var W=!M||O,te=!O||O.i;O||(O={}),M||(M=new t(3*q));var ie,L=p(function(ye){var Ce=M.length;if(ye>Ce){var Ue=new t(Math.max(2*Ce,ye));Ue.set(M),M=Ue}},"d"),B=O.f||0,v=O.p||0,k=O.b||0,D=O.l,A=O.d,w=O.m,j=O.n,R=8*q;do{if(!D){O.f=B=U(y,v,1);var z=U(y,v+1,3);if(v+=3,!z){var X=y[(Z=((ie=v)/8|0)+(7&ie&&1)+4)-4]|y[Z-3]<<8,J=Z+X;if(J>q){te&&F(0);break}W&&L(k+X),M.set(y.subarray(Z,J),k),O.b=k+=X,O.p=v=8*J;continue}if(z==1)D=C,A=_,w=9,j=5;else if(z==2){var Y=U(y,v,31)+257,N=U(y,v+10,15)+4,fe=Y+U(y,v+5,31)+1;v+=14;for(var ce=new t(fe),ne=new t(19),$=0;$<N;++$)ne[a[$]]=U(y,v+3*$,7);v+=3*N;var ue=b(ne),V=(1<<ue)-1,se=x(ne,ue,1);for($=0;$<fe;){var Z,G=se[U(y,v,V)];if(v+=15&G,(Z=G>>>4)<16)ce[$++]=Z;else{var ge=0,Q=0;for(Z==16?(Q=3+U(y,v,3),v+=2,ge=ce[$-1]):Z==17?(Q=3+U(y,v,7),v+=3):Z==18&&(Q=11+U(y,v,127),v+=7);Q--;)ce[$++]=ge}}var ee=ce.subarray(0,Y),re=ce.subarray(Y);w=b(ee),j=b(re),D=x(ee,w,1),A=x(re,j,1)}else F(1);if(v>R){te&&F(0);break}}W&&L(k+131072);for(var ae=(1<<w)-1,me=(1<<j)-1,K=v;;K=v){var he=(ge=D[E(y,v)&ae])>>>4;if((v+=15&ge)>R){te&&F(0);break}if(ge||F(2),he<256)M[k++]=he;else{if(he==256){K=v,D=null;break}var Te=he-254;if(he>264){var we=r[$=he-257];Te=U(y,v,(1<<we)-1)+o[$],v+=we}var xe=A[E(y,v)&me],Ae=xe>>>4;if(xe||F(3),v+=15&xe,re=l[Ae],Ae>3&&(we=e[Ae],re+=E(y,v)&(1<<we)-1,v+=we),v>R){te&&F(0);break}W&&L(k+131072);for(var le=k+Te;k<le;k+=4)M[k]=M[k-re],M[k+1]=M[k+1-re],M[k+2]=M[k+2-re],M[k+3]=M[k+3-re];k=le}}O.l=D,O.p=K,O.b=k,D&&(B=1,O.m=w,O.d=A,O.n=j)}while(!B);return k==M.length?M:function(ye,Ce,Ue){(Ue==null||Ue>ye.length)&&(Ue=ye.length);var Re=new(ye instanceof d?d:ye instanceof c?c:t)(Ue-Ce);return Re.set(ye.subarray(Ce,Ue)),Re}(M,0,k)},"O"),I=new t(0),H=typeof TextDecoder<"u"&&new TextDecoder;try{H.decode(I,{stream:!0})}catch{}return h.convert_streams=function(y){var M=new DataView(y),O=0;function q(){var Y=M.getUint16(O);return O+=2,Y}p(q,"t");function W(){var Y=M.getUint32(O);return O+=4,Y}p(W,"a");function te(Y){X.setUint16(J,Y),J+=2}p(te,"i");function ie(Y){X.setUint32(J,Y),J+=4}p(ie,"o");for(var L={signature:W(),flavor:W(),length:W(),numTables:q(),reserved:q(),totalSfntSize:W(),majorVersion:q(),minorVersion:q(),metaOffset:W(),metaLength:W(),metaOrigLength:W(),privOffset:W(),privLength:W()},B=0;Math.pow(2,B)<=L.numTables;)B++;B--;for(var v=16*Math.pow(2,B),k=16*L.numTables-v,D=12,A=[],w=0;w<L.numTables;w++)A.push({tag:W(),offset:W(),compLength:W(),origLength:W(),origChecksum:W()}),D+=16;var j,R=new Uint8Array(12+16*A.length+A.reduce(function(Y,N){return Y+N.origLength+4},0)),z=R.buffer,X=new DataView(z),J=0;return ie(L.flavor),te(L.numTables),te(v),te(B),te(k),A.forEach(function(Y){ie(Y.tag),ie(Y.origChecksum),ie(D),ie(Y.origLength),Y.outOffset=D,(D+=Y.origLength)%4!=0&&(D+=4-D%4)}),A.forEach(function(Y){var N,fe=y.slice(Y.offset,Y.offset+Y.compLength);if(Y.compLength!=Y.origLength){var ce=new Uint8Array(Y.origLength);N=new Uint8Array(fe,2),P(N,ce)}else ce=new Uint8Array(fe);R.set(ce,Y.outOffset);var ne=0;(D=Y.outOffset+Y.origLength)%4!=0&&(ne=4-D%4),R.set(new Uint8Array(ne).buffer,Y.outOffset+Y.origLength),j=D+ne}),z.slice(0,j)},Object.defineProperty(h,"__esModule",{value:!0}),h}({}).convert_streams}p(Vn,"woff2otfFactory");function qn(h,t){let d={M:2,L:2,Q:4,C:6,Z:0},c={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,e=2,a=4,i=8,n=16,o=32,s;function l(S){if(!s){let F={R:e,L:r,D:a,C:n,U:o,T:i};s=new Map;for(let P in c){let I=0;c[P].split(",").forEach(H=>{let[y,M]=H.split("+");y=parseInt(y,36),M=M?parseInt(M,36):0,s.set(I+=y,F[P]);for(let O=M;O--;)s.set(++I,F[P])})}}return s.get(S)||o}p(l,"getCharJoiningType");let u=1,f=2,g=3,x=4,m=[null,"isol","init","fina","medi"];function T(S){let F=new Uint8Array(S.length),P=o,I=u,H=-1;for(let y=0;y<S.length;y++){let M=S.codePointAt(y),O=l(M)|0,q=u;O&i||(P&(r|a|n)?O&(e|a|n)?(q=g,(I===u||I===g)&&F[H]++):O&(r|o)&&(I===f||I===x)&&F[H]--:P&(e|o)&&(I===f||I===x)&&F[H]--,I=F[y]=q,P=O,H=y,M>65535&&y++)}return F}p(T,"detectJoiningForms");function C(S,F){let P=[];for(let H=0;H<F.length;H++){let y=F.codePointAt(H);y>65535&&H++,P.push(h.U.codeToGlyph(S,y))}let I=S.GSUB;if(I){let{lookupList:H,featureList:y}=I,M,O=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,q=[];y.forEach(W=>{if(O.test(W.tag))for(let te=0;te<W.tab.length;te++){if(q[W.tab[te]])continue;q[W.tab[te]]=!0;let ie=H[W.tab[te]],L=/^(isol|init|fina|medi)$/.test(W.tag);L&&!M&&(M=T(F));for(let B=0;B<P.length;B++)(!M||!L||m[M[B]]===W.tag)&&h.U._applySubs(P,B,ie,H)}})}return P}p(C,"stringToGlyphs");function _(S,F){let P=new Int16Array(F.length*3),I=0;for(;I<F.length;I++){let O=F[I];if(O===-1)continue;P[I*3+2]=S.hmtx.aWidth[O];let q=S.GPOS;if(q){let W=q.lookupList;for(let te=0;te<W.length;te++){let ie=W[te];for(let L=0;L<ie.tabs.length;L++){let B=ie.tabs[L];if(ie.ltype===1){if(h._lctf.coverageIndex(B.coverage,O)!==-1&&B.pos){M(B.pos,I);break}}else if(ie.ltype===2){let v=null,k=H();if(k!==-1){let D=h._lctf.coverageIndex(B.coverage,F[k]);if(D!==-1){if(B.fmt===1){let A=B.pairsets[D];for(let w=0;w<A.length;w++)A[w].gid2===O&&(v=A[w])}else if(B.fmt===2){let A=h.U._getGlyphClass(F[k],B.classDef1),w=h.U._getGlyphClass(O,B.classDef2);v=B.matrix[A][w]}if(v){v.val1&&M(v.val1,k),v.val2&&M(v.val2,I);break}}}}else if(ie.ltype===4){let v=h._lctf.coverageIndex(B.markCoverage,O);if(v!==-1){let k=H(y),D=k===-1?-1:h._lctf.coverageIndex(B.baseCoverage,F[k]);if(D!==-1){let A=B.markArray[v],w=B.baseArray[D][A.markClass];P[I*3]=w.x-A.x+P[k*3]-P[k*3+2],P[I*3+1]=w.y-A.y+P[k*3+1];break}}}else if(ie.ltype===6){let v=h._lctf.coverageIndex(B.mark1Coverage,O);if(v!==-1){let k=H();if(k!==-1){let D=F[k];if(b(S,D)===3){let A=h._lctf.coverageIndex(B.mark2Coverage,D);if(A!==-1){let w=B.mark1Array[v],j=B.mark2Array[A][w.markClass];P[I*3]=j.x-w.x+P[k*3]-P[k*3+2],P[I*3+1]=j.y-w.y+P[k*3+1];break}}}}}}}}else if(S.kern&&!S.cff){let W=H();if(W!==-1){let te=S.kern.glyph1.indexOf(F[W]);if(te!==-1){let ie=S.kern.rval[te].glyph2.indexOf(O);ie!==-1&&(P[W*3+2]+=S.kern.rval[te].vals[ie])}}}}return P;function H(O){for(let q=I-1;q>=0;q--)if(F[q]!==-1&&(!O||O(F[q])))return q;return-1}function y(O){return b(S,O)===1}function M(O,q){for(let W=0;W<3;W++)P[q*3+W]+=O[W]||0}}p(_,"calcGlyphPositions");function b(S,F){let P=S.GDEF&&S.GDEF.glyphClassDef;return P?h.U._getGlyphClass(F,P):0}p(b,"getGlyphClass");function U(...S){for(let F=0;F<S.length;F++)if(typeof S[F]=="number")return S[F]}p(U,"firstNum");function E(S){let F=Object.create(null),P=S["OS/2"],I=S.hhea,H=S.head.unitsPerEm,y=U(P&&P.sTypoAscender,I&&I.ascender,H),M={unitsPerEm:H,ascender:y,descender:U(P&&P.sTypoDescender,I&&I.descender,0),capHeight:U(P&&P.sCapHeight,y),xHeight:U(P&&P.sxHeight,y),lineGap:U(P&&P.sTypoLineGap,I&&I.lineGap),supportsCodePoint(O){return h.U.codeToGlyph(S,O)>0},forEachGlyph(O,q,W,te){let ie=0,L=1/M.unitsPerEm*q,B=C(S,O),v=0,k=_(S,B);return B.forEach((D,A)=>{if(D!==-1){let w=F[D];if(!w){let{cmds:j,crds:R}=h.U.glyphToPath(S,D),z="",X=0;for(let ce=0,ne=j.length;ce<ne;ce++){let $=d[j[ce]];z+=j[ce];for(let ue=1;ue<=$;ue++)z+=(ue>1?",":"")+R[X++]}let J,Y,N,fe;if(R.length){J=Y=1/0,N=fe=-1/0;for(let ce=0,ne=R.length;ce<ne;ce+=2){let $=R[ce],ue=R[ce+1];$<J&&(J=$),ue<Y&&(Y=ue),$>N&&(N=$),ue>fe&&(fe=ue)}}else J=N=Y=fe=0;w=F[D]={index:D,advanceWidth:S.hmtx.aWidth[D],xMin:J,yMin:Y,xMax:N,yMax:fe,path:z}}te.call(null,w,ie+k[A*3]*L,k[A*3+1]*L,v),ie+=k[A*3+2]*L,W&&(ie+=W*q)}v+=O.codePointAt(v)>65535?2:1}),ie}};return M}return p(E,"wrapFontObj"),p(function(S){let F=new Uint8Array(S,0,4),P=h._bin.readASCII(F,0,4);if(P==="wOFF")S=t(S);else if(P==="wOF2")throw new Error("woff2 fonts not supported");return E(h.parse(S)[0])},"parse")}p(qn,"parserFactory");var qa=ar({name:"Typr Font Parser",dependencies:[Nn,Vn,qn],init(h,t,d){let c=h(),r=t();return d(c,r)}});function Yn(){return function(h){var t=p(function(){this.buckets=new Map},"n");t.prototype.add=function(_){var b=_>>5;this.buckets.set(b,(this.buckets.get(b)||0)|1<<(31&_))},t.prototype.has=function(_){var b=this.buckets.get(_>>5);return b!==void 0&&(b&1<<(31&_))!=0},t.prototype.serialize=function(){var _=[];return this.buckets.forEach(function(b,U){_.push((+U).toString(36)+":"+b.toString(36))}),_.join(",")},t.prototype.deserialize=function(_){var b=this;this.buckets.clear(),_.split(",").forEach(function(U){var E=U.split(":");b.buckets.set(parseInt(E[0],36),parseInt(E[1],36))})};var d=Math.pow(2,8),c=d-1,r=~c;function e(_){var b=function(E){return E&r}(_).toString(16),U=function(E){return(E&r)+d-1}(_).toString(16);return"codepoint-index/plane"+(_>>16)+"/"+b+"-"+U+".json"}p(e,"a");function a(_,b){var U=_&c,E=b.codePointAt(U/6|0);return((E=(E||48)-48)&1<<U%6)!=0}p(a,"i");function i(_,b){var U;(U=_,U.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(E){return E.split("-").map(function(S){return parseInt(S.trim(),16)})})).forEach(function(E){var S=E[0],F=E[1];F===void 0&&(F=S),b(S,F)})}p(i,"u");function n(_,b){i(_,function(U,E){for(var S=U;S<=E;S++)b(S)})}p(n,"c");var o={},s={},l=new WeakMap,u="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function f(_){var b=l.get(_);return b||(b=new t,n(_.ranges,function(U){return b.add(U)}),l.set(_,b)),b}p(f,"d");var g,x=new Map;function m(_,b,U){return _[b]?b:_[U]?U:function(E){for(var S in E)return S}(_)}p(m,"g");function T(_,b){var U=b;if(!_.includes(U)){U=1/0;for(var E=0;E<_.length;E++)Math.abs(_[E]-b)<Math.abs(U-b)&&(U=_[E])}return U}p(T,"w");function C(_){return g||(g=new Set,n("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(b){g.add(b)})),g.has(_)}return p(C,"k"),h.CodePointSet=t,h.clearCache=function(){o={},s={}},h.getFontsForString=function(_,b){b===void 0&&(b={});var U,E=b.lang;E===void 0&&(E=new RegExp("\\p{Script=Hangul}","u").test(U=_)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(U)?"ja":"en");var S=b.category;S===void 0&&(S="sans-serif");var F=b.style;F===void 0&&(F="normal");var P=b.weight;P===void 0&&(P=400);var I=(b.dataUrl||u).replace(/\/$/g,""),H=new Map,y=new Uint8Array(_.length),M={},O={},q=new Array(_.length),W=new Map,te=!1;function ie(v){var k=x.get(v);return k||(k=fetch(I+"/"+v).then(function(D){if(!D.ok)throw new Error(D.statusText);return D.json().then(function(A){if(!Array.isArray(A)||A[0]!==1)throw new Error("Incorrect schema version; need 1, got "+A[0]);return A[1]})}).catch(function(D){if(I!==u)return te||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+I+'", trying default CDN. '+D.message),te=!0),I=u,x.delete(v),ie(v);throw D}),x.set(v,k)),k}p(ie,"M");for(var L=function(v){var k=_.codePointAt(v),D=e(k);q[v]=D,o[D]||W.has(D)||W.set(D,ie(D).then(function(A){o[D]=A})),k>65535&&(v++,B=v)},B=0;B<_.length;B++)L(B);return Promise.all(W.values()).then(function(){W.clear();for(var v=function(D){var A=_.codePointAt(D),w=null,j=o[q[D]],R=void 0;for(var z in j){var X=O[z];if(X===void 0&&(X=O[z]=new RegExp(z).test(E||"en")),X){for(var J in R=z,j[z])if(a(A,j[z][J])){w=J;break}break}}if(!w){e:for(var Y in j)if(Y!==R){for(var N in j[Y])if(a(A,j[Y][N])){w=N;break e}}}w||(console.debug("No font coverage for U+"+A.toString(16)),w="latin"),q[D]=w,s[w]||W.has(w)||W.set(w,ie("font-meta/"+w+".json").then(function(fe){s[w]=fe})),A>65535&&(D++,k=D)},k=0;k<_.length;k++)v(k);return Promise.all(W.values())}).then(function(){for(var v,k=null,D=0;D<_.length;D++){var A=_.codePointAt(D);if(k&&(C(A)||f(k).has(A)))y[D]=y[D-1];else{k=s[q[D]];var w=M[k.id];if(!w){var j=k.typeforms,R=m(j,S,"sans-serif"),z=m(j[R],F,"normal"),X=T((v=j[R])===null||v===void 0?void 0:v[z],P);w=M[k.id]=I+"/font-files/"+k.id+"/"+R+"."+z+"."+X+".woff"}var J=H.get(w);J==null&&(J=H.size,H.set(w,J)),y[D]=J}A>65535&&(D++,y[D]=y[D-1])}return{fontUrls:Array.from(H.keys()),chars:y}})},Object.defineProperty(h,"__esModule",{value:!0}),h}({})}p(Yn,"unicodeFontResolverClientFactory");function Hn(h,t){let d=Object.create(null),c=Object.create(null);function r(a,i){let n=p(o=>{console.error("Failure loading font ".concat(a),o)},"onError");try{let o=new XMLHttpRequest;o.open("get",a,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>=400)n(new Error(o.statusText));else if(o.status>0)try{let s=h(o.response);s.src=a,i(s)}catch(s){n(s)}},o.onerror=n,o.send()}catch(o){n(o)}}p(r,"doLoadFont");function e(a,i){let n=d[a];n?i(n):c[a]?c[a].push(i):(c[a]=[i],r(a,o=>{o.src=a,d[a]=o,c[a].forEach(s=>s(o)),delete c[a]}))}return p(e,"loadFont"),function(a,i,{lang:n,fonts:o=[],style:s="normal",weight:l="normal",unicodeFontsURL:u}={}){let f=new Uint8Array(a.length),g=[];a.length||C();let x=new Map,m=[];if(s!=="italic"&&(s="normal"),typeof l!="number"&&(l=l==="bold"?700:400),o&&!Array.isArray(o)&&(o=[o]),o=o.slice().filter(b=>!b.lang||b.lang.test(n)).reverse(),o.length){let b=0;p(function U(E=0){for(let S=E,F=a.length;S<F;S++){let P=a.codePointAt(S);if(b===1&&g[f[S-1]].supportsCodePoint(P)||S>0&&/\s/.test(a[S]))f[S]=f[S-1],b===2&&(m[m.length-1][1]=S);else for(let I=f[S],H=o.length;I<=H;I++)if(I===H){let y=b===2?m[m.length-1]:m[m.length]=[S,S];y[1]=S,b=2}else{f[S]=I;let{src:y,unicodeRange:M}=o[I];if(!M||_(P,M)){let O=d[y];if(!O){e(y,()=>{U(S)});return}if(O.supportsCodePoint(P)){let q=x.get(O);typeof q!="number"&&(q=g.length,g.push(O),x.set(O,q)),f[S]=q,b=1;break}}}P>65535&&S+1<F&&(f[S+1]=f[S],S++,b===2&&(m[m.length-1][1]=S))}T()},"resolveUserFonts")()}else m.push([0,a.length-1]),T();function T(){if(m.length){let b=m.map(U=>a.substring(U[0],U[1]+1)).join(`
`);t.getFontsForString(b,{lang:n||void 0,style:s,weight:l,dataUrl:u}).then(({fontUrls:U,chars:E})=>{let S=g.length,F=0;m.forEach(I=>{for(let H=0,y=I[1]-I[0];H<=y;H++)f[I[0]+H]=E[F++]+S;F++});let P=0;U.forEach((I,H)=>{e(I,y=>{g[H+S]=y,++P===U.length&&C()})})})}else C()}p(T,"resolveFallbacks");function C(){i({chars:f,fonts:g})}p(C,"allDone");function _(b,U){for(let E=0;E<U.length;E++){let[S,F=S]=U[E];if(S<=b&&b<=F)return!0}return!1}p(_,"isCodeInRanges")}}p(Hn,"createFontResolver");var Ya=ar({name:"FontResolver",dependencies:[Hn,qa,Yn],init(h,t,d){return h(t,d())}});function Xn(h,t){let d=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,c="[^\\S\\u00A0]",r=new RegExp("".concat(c,"|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]"));function e({text:f,lang:g,fonts:x,style:m,weight:T,preResolvedFonts:C,unicodeFontsURL:_},b){let U=p(({chars:E,fonts:S})=>{let F,P,I=[];for(let H=0;H<E.length;H++)E[H]!==P?(P=E[H],I.push(F={start:H,end:H,fontObj:S[E[H]]})):F.end=H;b(I)},"onResolved");C?U(C):h(f,U,{lang:g,fonts:x,style:m,weight:T,unicodeFontsURL:_})}p(e,"calculateFontRuns");function a({text:f="",font:g,lang:x,sdfGlyphSize:m=64,fontSize:T=400,fontWeight:C=1,fontStyle:_="normal",letterSpacing:b=0,lineHeight:U="normal",maxWidth:E=1/0,direction:S,textAlign:F="left",textIndent:P=0,whiteSpace:I="normal",overflowWrap:H="normal",anchorX:y=0,anchorY:M=0,metricsOnly:O=!1,unicodeFontsURL:q,preResolvedFonts:W=null,includeCaretPositions:te=!1,chunkedBoundsSize:ie=8192,colorRanges:L=null},B){let v=s(),k={fontLoad:0,typesetting:0};f.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),f=f.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,b=+b,E=+E,U=U||"normal",P=+P,e({text:f,lang:x,style:_,weight:C,fonts:typeof g=="string"?[{src:g}]:g,unicodeFontsURL:q,preResolvedFonts:W},D=>{k.fontLoad=s()-v;let A=isFinite(E),w=null,j=null,R=null,z=null,X=null,J=null,Y=null,N=null,fe=0,ce=0,ne=I!=="nowrap",$=new Map,ue=s(),V=P,se=0,Z=new l,G=[Z];D.forEach(ae=>{let{fontObj:me}=ae,{ascender:K,descender:he,unitsPerEm:Te,lineGap:we,capHeight:xe,xHeight:Ae}=me,le=$.get(me);if(!le){let de=T/Te,pe=U==="normal"?(K-he+we)*de:U*T,He=(pe-(K-he)*de)/2,Se=Math.min(pe,(K-he)*de),be=(K+he)/2*de+Se/2;le={index:$.size,src:me.src,fontObj:me,fontSizeMult:de,unitsPerEm:Te,ascender:K*de,descender:he*de,capHeight:xe*de,xHeight:Ae*de,lineHeight:pe,baseline:-He-K*de,caretTop:be,caretBottom:be-Se},$.set(me,le)}let{fontSizeMult:ye}=le,Ce=f.slice(ae.start,ae.end+1),Ue,Re;me.forEachGlyph(Ce,T,b,(de,pe,He,Se)=>{pe+=se,Se+=ae.start,Ue=pe,Re=de;let be=f.charAt(Se),Oe=de.advanceWidth*ye,Fe=Z.count,ve;if("isEmpty"in de||(de.isWhitespace=!!be&&new RegExp(c).test(be),de.canBreakAfter=!!be&&r.test(be),de.isEmpty=de.xMin===de.xMax||de.yMin===de.yMax||d.test(be)),!de.isWhitespace&&!de.isEmpty&&ce++,ne&&A&&!de.isWhitespace&&pe+Oe+V>E&&Fe){if(Z.glyphAt(Fe-1).glyphObj.canBreakAfter)ve=new l,V=-pe;else for(let Me=Fe;Me--;)if(Me===0&&H==="break-word"){ve=new l,V=-pe;break}else if(Z.glyphAt(Me).glyphObj.canBreakAfter){ve=Z.splitAt(Me+1);let Ie=ve.glyphAt(0).x;V-=Ie;for(let De=ve.count;De--;)ve.glyphAt(De).x-=Ie;break}ve&&(Z.isSoftWrapped=!0,Z=ve,G.push(Z),fe=E)}let ke=Z.glyphAt(Z.count);ke.glyphObj=de,ke.x=pe+V,ke.y=He,ke.width=Oe,ke.charIndex=Se,ke.fontData=le,be===`
`&&(Z=new l,G.push(Z),V=-(pe+Oe+b*T)+P)}),se=Ue+Re.advanceWidth*ye+b*T});let ge=0;G.forEach(ae=>{let me=!0;for(let K=ae.count;K--;){let he=ae.glyphAt(K);me&&!he.glyphObj.isWhitespace&&(ae.width=he.x+he.width,ae.width>fe&&(fe=ae.width),me=!1);let{lineHeight:Te,capHeight:we,xHeight:xe,baseline:Ae}=he.fontData;Te>ae.lineHeight&&(ae.lineHeight=Te);let le=Ae-ae.baseline;le<0&&(ae.baseline+=le,ae.cap+=le,ae.ex+=le),ae.cap=Math.max(ae.cap,ae.baseline+we),ae.ex=Math.max(ae.ex,ae.baseline+xe)}ae.baseline-=ge,ae.cap-=ge,ae.ex-=ge,ge+=ae.lineHeight});let Q=0,ee=0;if(y&&(typeof y=="number"?Q=-y:typeof y=="string"&&(Q=-fe*(y==="left"?0:y==="center"?.5:y==="right"?1:n(y)))),M&&(typeof M=="number"?ee=-M:typeof M=="string"&&(ee=M==="top"?0:M==="top-baseline"?-G[0].baseline:M==="top-cap"?-G[0].cap:M==="top-ex"?-G[0].ex:M==="middle"?ge/2:M==="bottom"?ge:M==="bottom-baseline"?-G[G.length-1].baseline:n(M)*ge)),!O){let ae=t.getEmbeddingLevels(f,S);w=new Uint16Array(ce),j=new Uint8Array(ce),R=new Float32Array(ce*2),z={},Y=[1/0,1/0,-1/0,-1/0],N=[],te&&(J=new Float32Array(f.length*4)),L&&(X=new Uint8Array(ce*3));let me=0,K=-1,he=-1,Te,we;if(G.forEach((xe,Ae)=>{let{count:le,width:ye}=xe;if(le>0){let Ce=0;for(let Se=le;Se--&&xe.glyphAt(Se).glyphObj.isWhitespace;)Ce++;let Ue=0,Re=0;if(F==="center")Ue=(fe-ye)/2;else if(F==="right")Ue=fe-ye;else if(F==="justify"&&xe.isSoftWrapped){let Se=0;for(let be=le-Ce;be--;)xe.glyphAt(be).glyphObj.isWhitespace&&Se++;Re=(fe-ye)/Se}if(Re||Ue){let Se=0;for(let be=0;be<le;be++){let Oe=xe.glyphAt(be),Fe=Oe.glyphObj;Oe.x+=Ue+Se,Re!==0&&Fe.isWhitespace&&be<le-Ce&&(Se+=Re,Oe.width+=Re)}}let de=t.getReorderSegments(f,ae,xe.glyphAt(0).charIndex,xe.glyphAt(xe.count-1).charIndex);for(let Se=0;Se<de.length;Se++){let[be,Oe]=de[Se],Fe=1/0,ve=-1/0;for(let ke=0;ke<le;ke++)if(xe.glyphAt(ke).charIndex>=be){let Me=ke,Ie=ke;for(;Ie<le;Ie++){let De=xe.glyphAt(Ie);if(De.charIndex>Oe)break;Ie<le-Ce&&(Fe=Math.min(Fe,De.x),ve=Math.max(ve,De.x+De.width))}for(let De=Me;De<Ie;De++){let Ve=xe.glyphAt(De);Ve.x=ve-(Ve.x+Ve.width-Fe)}break}}let pe,He=p(Se=>pe=Se,"setGlyphObj");for(let Se=0;Se<le;Se++){let be=xe.glyphAt(Se);pe=be.glyphObj;let Oe=pe.index,Fe=ae.levels[be.charIndex]&1;if(Fe){let ve=t.getMirroredCharacter(f[be.charIndex]);ve&&be.fontData.fontObj.forEachGlyph(ve,0,0,He)}if(te){let{charIndex:ve,fontData:ke}=be,Me=be.x+Q,Ie=be.x+be.width+Q;J[ve*4]=Fe?Ie:Me,J[ve*4+1]=Fe?Me:Ie,J[ve*4+2]=xe.baseline+ke.caretBottom+ee,J[ve*4+3]=xe.baseline+ke.caretTop+ee;let De=ve-K;De>1&&o(J,K,De),K=ve}if(L){let{charIndex:ve}=be;for(;ve>he;)he++,L.hasOwnProperty(he)&&(we=L[he])}if(!pe.isWhitespace&&!pe.isEmpty){let ve=me++,{fontSizeMult:ke,src:Me,index:Ie}=be.fontData,De=z[Me]||(z[Me]={});De[Oe]||(De[Oe]={path:pe.path,pathBounds:[pe.xMin,pe.yMin,pe.xMax,pe.yMax]});let Ve=be.x+Q,Ke=be.y+xe.baseline+ee;R[ve*2]=Ve,R[ve*2+1]=Ke;let qe=Ve+pe.xMin*ke,Ye=Ke+pe.yMin*ke,Xe=Ve+pe.xMax*ke,$e=Ke+pe.yMax*ke;qe<Y[0]&&(Y[0]=qe),Ye<Y[1]&&(Y[1]=Ye),Xe>Y[2]&&(Y[2]=Xe),$e>Y[3]&&(Y[3]=$e),ve%ie===0&&(Te={start:ve,end:ve,rect:[1/0,1/0,-1/0,-1/0]},N.push(Te)),Te.end++;let Le=Te.rect;if(qe<Le[0]&&(Le[0]=qe),Ye<Le[1]&&(Le[1]=Ye),Xe>Le[2]&&(Le[2]=Xe),$e>Le[3]&&(Le[3]=$e),w[ve]=Oe,j[ve]=Ie,L){let je=ve*3;X[je]=we>>16&255,X[je+1]=we>>8&255,X[je+2]=we&255}}}}}),J){let xe=f.length-K;xe>1&&o(J,K,xe)}}let re=[];$.forEach(({index:ae,src:me,unitsPerEm:K,ascender:he,descender:Te,lineHeight:we,capHeight:xe,xHeight:Ae})=>{re[ae]={src:me,unitsPerEm:K,ascender:he,descender:Te,lineHeight:we,capHeight:xe,xHeight:Ae}}),k.typesetting=s()-ue,B({glyphIds:w,glyphFontIndices:j,glyphPositions:R,glyphData:z,fontData:re,caretPositions:J,glyphColors:X,chunkedBounds:N,fontSize:T,topBaseline:ee+G[0].baseline,blockBounds:[Q,ee-ge,Q+fe,ee],visibleBounds:Y,timings:k})})}p(a,"typeset");function i(f,g){a(Pa(La({},f),{metricsOnly:!0}),x=>{let[m,T,C,_]=x.blockBounds;g({width:C-m,height:_-T})})}p(i,"measure");function n(f){let g=f.match(/^([\d.]+)%$/),x=g?parseFloat(g[1]):NaN;return isNaN(x)?0:x/100}p(n,"parsePercent");function o(f,g,x){let m=f[g*4],T=f[g*4+1],C=f[g*4+2],_=f[g*4+3],b=(T-m)/x;for(let U=0;U<x;U++){let E=(g+U)*4;f[E]=m+b*U,f[E+1]=m+b*(U+1),f[E+2]=C,f[E+3]=_}}p(o,"fillLigatureCaretPositions");function s(){return(self.performance||Date).now()}p(s,"now");function l(){this.data=[]}p(l,"TextLine");let u=["glyphObj","x","y","width","charIndex","fontData"];return l.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/u.length)},glyphAt(f){let g=l.flyweight;return g.data=this.data,g.index=f,g},splitAt(f){let g=new l;return g.data=this.data.splice(f*u.length),g}},l.flyweight=u.reduce((f,g,x,m)=>(Object.defineProperty(f,g,{get(){return this.data[this.index*u.length+x]},set(T){this.data[this.index*u.length+x]=T}}),f),{data:null,index:0}),{typeset:a,measure:i}}p(Xn,"createTypesetter");var tr=p(()=>(self.performance||Date).now(),"now"),Jr=Rt(),xn;function Zn(h,t,d,c,r,e,a,i,n,o,s=!0){return s?Xa(h,t,d,c,r,e,a,i,n,o).then(null,l=>(xn||(console.warn("WebGL SDF generation failed, falling back to JS",l),xn=!0),Ft(h,t,d,c,r,e,a,i,n,o))):Ft(h,t,d,c,r,e,a,i,n,o)}p(Zn,"generateSDF");var Yr=[],Ha=5,Ct=0;function Bt(){let h=tr();for(;Yr.length&&tr()-h<Ha;)Yr.shift()();Ct=Yr.length?setTimeout(Bt,0):0}p(Bt,"nextChunk");var Xa=p((...h)=>new Promise((t,d)=>{Yr.push(()=>{let c=tr();try{Jr.webgl.generateIntoCanvas(...h),t({timing:tr()-c})}catch(r){d(r)}}),Ct||(Ct=setTimeout(Bt,0))}),"generateSDF_GL"),Za=4,Qa=2e3,bn={},Ja=0;function Ft(h,t,d,c,r,e,a,i,n,o){let s="TroikaTextSDFGenerator_JS_"+Ja++%Za,l=bn[s];return l||(l=bn[s]={workerModule:ar({name:s,workerId:s,dependencies:[Rt,tr],init(u,f){let g=u().javascript.generate;return function(...x){let m=f();return{textureData:g(...x),timing:f()-m}}},getTransferables(u){return[u.textureData.buffer]}}),requests:0,idleTimer:null}),l.requests++,clearTimeout(l.idleTimer),l.workerModule(h,t,d,c,r,e).then(({textureData:u,timing:f})=>{let g=tr(),x=new Uint8Array(u.length*4);for(let m=0;m<u.length;m++)x[m*4+o]=u[m];return Jr.webglUtils.renderImageData(a,x,i,n,h,t,1<<3-o),f+=tr()-g,--l.requests===0&&(l.idleTimer=setTimeout(()=>{Rn(s)},Qa)),{timing:f}})}p(Ft,"generateSDF_JS_Worker");function Qn(h){h._warm||(Jr.webgl.isSupported(h),h._warm=!0)}p(Qn,"warmUpSDFCanvas");var Ka=Jr.webglUtils.resizeWebGLCanvasWithoutClearing,Je={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},$a=new Qr,Jn=!1;function rr(){return(self.performance||Date).now()}p(rr,"now$1");function Kn(h){Jn?console.warn("configureTextBuilder called after first font request; will be ignored."):Gt(Je,h)}p(Kn,"configureTextBuilder");var Sn=Object.create(null);function Pt(h,t){Jn=!0,h=Gt({},h);let d=rr(),{defaultFontURL:c}=Je,r=[];if(c&&r.push({label:"default",src:At(c)}),h.font&&r.push({label:"user",src:At(h.font)}),h.font=r,h.text=""+h.text,h.sdfGlyphSize=h.sdfGlyphSize||Je.sdfGlyphSize,h.unicodeFontsURL=h.unicodeFontsURL||Je.unicodeFontsURL,h.colorRanges!=null){let u={};for(let f in h.colorRanges)if(h.colorRanges.hasOwnProperty(f)){let g=h.colorRanges[f];typeof g!="number"&&(g=$a.set(g).getHex()),u[f]=g}h.colorRanges=u}Object.freeze(h);let{textureWidth:e,sdfExponent:a}=Je,{sdfGlyphSize:i}=h,n=e/i*4,o=Sn[i];if(!o){let u=document.createElement("canvas");u.width=e,u.height=i*256/n,o=Sn[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:u,sdfTexture:new Da(u,void 0,void 0,void 0,hn,hn),contextLost:!1,glyphsByFont:new Map},o.sdfTexture.generateMipmaps=!1,$n(o)}let{sdfTexture:s,sdfCanvas:l}=o;(Je.useWorker?ea:ri)(h).then(u=>{let{glyphIds:f,glyphFontIndices:g,fontData:x,glyphPositions:m,fontSize:T,timings:C}=u,_=[],b=new Float32Array(f.length*4),U=0,E=0,S=rr(),F=x.map(M=>{let O=o.glyphsByFont.get(M.src);return O||o.glyphsByFont.set(M.src,O=new Map),O});f.forEach((M,O)=>{let q=g[O],{src:W,unitsPerEm:te}=x[q],ie=F[q].get(M);if(!ie){let{path:D,pathBounds:A}=u.glyphData[W][M],w=Math.max(A[2]-A[0],A[3]-A[1])/i*(Je.sdfMargin*i+.5),j=o.glyphCount++,R=[A[0]-w,A[1]-w,A[2]+w,A[3]+w];F[q].set(M,ie={path:D,atlasIndex:j,sdfViewBox:R}),_.push(ie)}let{sdfViewBox:L}=ie,B=m[E++],v=m[E++],k=T/te;b[U++]=B+L[0]*k,b[U++]=v+L[1]*k,b[U++]=B+L[2]*k,b[U++]=v+L[3]*k,f[O]=ie.atlasIndex}),C.quads=(C.quads||0)+(rr()-S);let P=rr();C.sdf={};let I=l.height,H=Math.ceil(o.glyphCount/n),y=Math.pow(2,Math.ceil(Math.log2(H*i)));y>I&&(console.info("Increasing SDF texture size ".concat(I,"->").concat(y)),Ka(l,e,y),s.dispose()),Promise.all(_.map(M=>Lt(M,o,h.gpuAccelerateSDF).then(({timing:O})=>{C.sdf[M.atlasIndex]=O}))).then(()=>{_.length&&!o.contextLost&&(Wt(o),s.needsUpdate=!0),C.sdfTotal=rr()-P,C.total=rr()-d,t(Object.freeze({parameters:h,sdfTexture:s,sdfGlyphSize:i,sdfExponent:a,glyphBounds:b,glyphAtlasIndices:f,glyphColors:u.glyphColors,caretPositions:u.caretPositions,chunkedBounds:u.chunkedBounds,ascender:u.ascender,descender:u.descender,lineHeight:u.lineHeight,capHeight:u.capHeight,xHeight:u.xHeight,topBaseline:u.topBaseline,blockBounds:u.blockBounds,visibleBounds:u.visibleBounds,timings:u.timings}))})}),Promise.resolve().then(()=>{o.contextLost||Qn(l)})}p(Pt,"getTextRenderInfo");function Lt({path:h,atlasIndex:t,sdfViewBox:d},{sdfGlyphSize:c,sdfCanvas:r,contextLost:e},a){if(e)return Promise.resolve({timing:-1});let{textureWidth:i,sdfExponent:n}=Je,o=Math.max(d[2]-d[0],d[3]-d[1]),s=Math.floor(t/4),l=s%(i/c)*c,u=Math.floor(s/(i/c))*c,f=t%4;return Zn(c,c,h,d,o,n,r,l,u,f,a)}p(Lt,"generateGlyphSDF");function $n(h){let t=h.sdfCanvas;t.addEventListener("webglcontextlost",d=>{console.log("Context Lost",d),d.preventDefault(),h.contextLost=!0}),t.addEventListener("webglcontextrestored",d=>{console.log("Context Restored",d),h.contextLost=!1;let c=[];h.glyphsByFont.forEach(r=>{r.forEach(e=>{c.push(Lt(e,h,!0))})}),Promise.all(c).then(()=>{Wt(h),h.sdfTexture.needsUpdate=!0})})}p($n,"initContextLossHandling");function Dt({font:h,characters:t,sdfGlyphSize:d},c){let r=Array.isArray(t)?t.join(`
`):""+t;Pt({font:h,sdfGlyphSize:d,text:r},c)}p(Dt,"preloadFont");function Gt(h,t){for(let d in t)t.hasOwnProperty(d)&&(h[d]=t[d]);return h}p(Gt,"assign");var Vr;function At(h){return Vr||(Vr=typeof document>"u"?{}:document.createElement("a")),Vr.href=h,Vr.href}p(At,"toAbsoluteURL");function Wt(h){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");let{sdfCanvas:t,sdfTexture:d}=h,{width:c,height:r}=t,e=h.sdfCanvas.getContext("webgl"),a=d.image.data;(!a||a.length!==c*r*4)&&(a=new Uint8Array(c*r*4),d.image={width:c,height:r,data:a},d.flipY=!1,d.isDataTexture=!0),e.readPixels(0,0,c,r,e.RGBA,e.UNSIGNED_BYTE,a)}}p(Wt,"safariPre15Workaround");var ei=ar({name:"Typesetter",dependencies:[Xn,Ya,za],init(h,t,d){return h(t,d())}}),ea=ar({name:"Typesetter",dependencies:[ei],init(h){return function(t){return new Promise(d=>{h.typeset(t,d)})}},getTransferables(h){let t=[];for(let d in h)h[d]&&h[d].buffer&&t.push(h[d].buffer);return t}}),ri=ea.onMainThread,kn={};function ra(h){let t=kn[h];return t||(t=kn[h]=new It(1,1,h,h).translate(.5,.5,0)),t}p(ra,"getTemplateGeometry");var Hr="aTroikaGlyphBounds",Dr="aTroikaGlyphIndex",ti="aTroikaGlyphColor",ta=class extends _a{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Ca,this.boundingBox=new Fn}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let d=ra(t);["position","normal","uv"].forEach(c=>{this.attributes[c]=d.attributes[c].clone()}),this.setIndex(d.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,d,c,r,e){this.updateAttributeData(Hr,t,4),this.updateAttributeData(Dr,d,1),this.updateAttributeData(ti,e,3),this._blockBounds=c,this._chunkedBounds=r,this.instanceCount=d.length,this._updateBounds()}_updateBounds(){let t=this._blockBounds;if(t){let{curveRadius:d,boundingBox:c}=this;if(d){let{PI:r,floor:e,min:a,max:i,sin:n,cos:o}=Math,s=r/2,l=r*2,u=Math.abs(d),f=t[0]/u,g=t[2]/u,x=e((f+s)/l)!==e((g+s)/l)?-u:a(n(f)*u,n(g)*u),m=e((f-s)/l)!==e((g-s)/l)?u:i(n(f)*u,n(g)*u),T=e((f+r)/l)!==e((g+r)/l)?u*2:i(u-o(f)*u,u-o(g)*u);c.min.set(x,t[1],d<0?-T:0),c.max.set(m,t[3],d<0?0:T)}else c.min.set(t[0],t[1],0),c.max.set(t[2],t[3],0);c.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let d=this.getAttribute(Dr).count,c=this._chunkedBounds;if(c)for(let r=c.length;r--;){d=c[r].end;let e=c[r].rect;if(e[1]<t.w&&e[3]>t.y&&e[0]<t.z&&e[2]>t.x)break}this.instanceCount=d}updateAttributeData(t,d,c){let r=this.getAttribute(t);d?r&&r.array.length===d.length?(r.array.set(d),r.needsUpdate=!0):(this.setAttribute(t,new Fa(d,c)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(t)}};p(ta,"GlyphsGeometry");var ni=ta,ai=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,ii=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,oi=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,si=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function zt(h){let t=dr(h,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ar},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new pn(0,0,0,0)},uTroikaClipRect:{value:new pn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ar},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Qr},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Aa},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:ai,vertexTransform:ii,fragmentDefs:oi,fragmentColorTransform:si,customRewriter({vertexShader:d,fragmentShader:c}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(c)&&(c=c.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(d)||(d=d.replace(Ln,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:d,fragmentShader:c}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}p(zt,"createTextDerivedMaterial");var jt=new Ua({color:16777215,side:Oa,transparent:!0}),Tn=8421504,Un=new Dn,qr=new pr,bt=new pr,wr=[],li=new pr,St="+x+y";function Ot(h){return Array.isArray(h)?h[0]:h}p(Ot,"first");var na=p(()=>{let h=new Mt(new It(1,1),jt);return na=p(()=>h,"getFlatRaycastMesh"),h},"getFlatRaycastMesh"),aa=p(()=>{let h=new Mt(new It(1,1,32,1),jt);return aa=p(()=>h,"getCurvedRaycastMesh"),h},"getCurvedRaycastMesh"),ui={type:"syncstart"},fi={type:"synccomplete"},ia=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],ci=ia.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail"),oa=class extends Mt{constructor(){let t=new ni;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Tn,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=St,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(ui),Pt({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},d=>{this._isSyncing=!1,this._textRenderInfo=d,this.geometry.updateGlyphs(d.glyphBounds,d.glyphAtlasIndices,d.blockBounds,d.chunkedBounds,d.glyphColors);let c=this._queuedSyncs;c&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{c.forEach(r=>r&&r())})),this.dispatchEvent(fi),t&&t()})))}onBeforeRender(t,d,c,r,e,a){this.sync(),e.isTroikaTextMaterial&&this._prepareForRender(e)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(t){return zt(t)}get material(){let t=this._derivedMaterial,d=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=jt.clone());if((!t||!t.isDerivedFrom(d))&&(t=this._derivedMaterial=this.createDerivedMaterial(d),d.addEventListener("dispose",p(function c(){d.removeEventListener("dispose",c),t.dispose()},"onDispose"))),this.hasOutline()){let c=t._outlineMtl;return c||(c=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),c.isTextOutlineMaterial=!0,c.depthWrite=!1,c.map=null,t.addEventListener("dispose",p(function r(){t.removeEventListener("dispose",r),c.dispose()},"onDispose"))),[c,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return Ot(this.material).getDepthMaterial()}set customDepthMaterial(t){}get customDistanceMaterial(){return Ot(this.material).getDistanceMaterial()}set customDistanceMaterial(t){}_prepareForRender(t){let d=t.isTextOutlineMaterial,c=t.uniforms,r=this.textRenderInfo;if(r){let{sdfTexture:i,blockBounds:n}=r;c.uTroikaSDFTexture.value=i,c.uTroikaSDFTextureSize.value.set(i.image.width,i.image.height),c.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,c.uTroikaSDFExponent.value=r.sdfExponent,c.uTroikaTotalBounds.value.fromArray(n),c.uTroikaUseGlyphColors.value=!d&&!!r.glyphColors;let o=0,s=0,l=0,u,f,g,x=0,m=0;if(d){let{outlineWidth:C,outlineOffsetX:_,outlineOffsetY:b,outlineBlur:U,outlineOpacity:E}=this;o=this._parsePercent(C)||0,s=Math.max(0,this._parsePercent(U)||0),u=E,x=this._parsePercent(_)||0,m=this._parsePercent(b)||0}else l=Math.max(0,this._parsePercent(this.strokeWidth)||0),l&&(g=this.strokeColor,c.uTroikaStrokeColor.value.set(g??Tn),f=this.strokeOpacity,f==null&&(f=1)),u=this.fillOpacity;c.uTroikaEdgeOffset.value=o,c.uTroikaPositionOffset.value.set(x,m),c.uTroikaBlurRadius.value=s,c.uTroikaStrokeWidth.value=l,c.uTroikaStrokeOpacity.value=f,c.uTroikaFillOpacity.value=u??1,c.uTroikaCurveRadius.value=this.curveRadius||0;let T=this.clipRect;if(T&&Array.isArray(T)&&T.length===4)c.uTroikaClipRect.value.fromArray(T);else{let C=(this.fontSize||.1)*100;c.uTroikaClipRect.value.set(n[0]-C,n[1]-C,n[2]+C,n[3]+C)}this.geometry.applyClipRect(c.uTroikaClipRect.value)}c.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;let e=d?this.outlineColor||0:this.color;if(e==null)delete t.color;else{let i=t.hasOwnProperty("color")?t.color:t.color=new Qr;(e!==i._input||typeof e=="object")&&i.set(i._input=e)}let a=this.orientation||St;if(a!==t._orientation){let i=c.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let n=a!==St&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(n){let[,o,s,l,u]=n;qr.set(0,0,0)[s]=o==="-"?1:-1,bt.set(0,0,0)[u]=l==="-"?-1:1,Un.lookAt(li,qr.cross(bt),bt),i.setFromMatrix4(Un)}else i.identity();t._orientation=a}}_parsePercent(t){if(typeof t=="string"){let d=t.match(/^(-?[\d.]+)%$/),c=d?parseFloat(d[1]):NaN;t=(isNaN(c)?0:c/100)*this.fontSize}return t}localPositionToTextCoords(t,d=new Ar){d.copy(t);let c=this.curveRadius;return c&&(d.x=Math.atan2(t.x,Math.abs(c)-Math.abs(t.z))*Math.abs(c)),d}worldPositionToTextCoords(t,d=new Ar){return qr.copy(t),this.localPositionToTextCoords(this.worldToLocal(qr),d)}raycast(t,d){let{textRenderInfo:c,curveRadius:r}=this;if(c){let e=c.blockBounds,a=r?aa():na(),i=a.geometry,{position:n,uv:o}=i.attributes;for(let s=0;s<o.count;s++){let l=e[0]+o.getX(s)*(e[2]-e[0]),u=e[1]+o.getY(s)*(e[3]-e[1]),f=0;r&&(f=r-Math.cos(l/r)*r,l=Math.sin(l/r)*r),n.setXYZ(s,l,u,f)}i.boundingSphere=this.geometry.boundingSphere,i.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,wr.length=0,a.raycast(t,wr);for(let s=0;s<wr.length;s++)wr[s].object=this,d.push(wr[s])}}copy(t){let d=this.geometry;return super.copy(t),this.geometry=d,ci.forEach(c=>{this[c]=t[c]}),this}clone(){return new this.constructor().copy(this)}};p(oa,"Text");var cr=oa;ia.forEach(h=>{let t="_private_"+h;Object.defineProperty(cr.prototype,h,{get(){return this[t]},set(d){d!==this[t]&&(this[t]=d,this._needsSync=!0)}})});var di={type:"syncstart"},hi={type:"synccomplete"},fr="aTroikaTextBatchMemberIndex",Et=32,wn=new Fn,_n=new Qr,sa=class la extends cr{constructor(){super(),this._members=new Map,this._dataTextures={},this._onMemberSynced=t=>{this._members.get(t.target).dirty=!0}}add(...t){for(let d=0;d<t.length;d++)t[d]instanceof cr?this.addText(t[d]):super.add(t[d]);return this}remove(...t){for(let d=0;d<t.length;d++)t[d]instanceof cr?this.removeText(t[d]):super.remove(t[d]);return this}addText(t){this._members.has(t)||(this._members.set(t,{index:-1,glyphCount:-1,dirty:!0}),t.addEventListener("synccomplete",this._onMemberSynced))}removeText(t){this._needsRepack=!0,t.removeEventListener("synccomplete",this._onMemberSynced),this._members.delete(t)}createDerivedMaterial(t){return ua(t)}updateMatrixWorld(t){super.updateMatrixWorld(t),this.updateBounds()}updateBounds(){let t=this.geometry.boundingBox.makeEmpty();this._members.forEach((d,c)=>{c.matrixAutoUpdate&&c.updateMatrix(),wn.copy(c.geometry.boundingBox).applyMatrix4(c.matrix),t.union(wn)}),t.getBoundingSphere(this.geometry.boundingSphere)}hasOutline(){for(let t of this._members.keys())if(t.hasOutline())return!0;return!1}_prepareForRender(t){let d=t.isTextOutlineMaterial;t.uniforms.uTroikaIsOutline.value=d;let c=this._dataTextures[d?"outline":"main"],r=Math.pow(2,Math.ceil(Math.log2(this._members.size*Et)));if(!c||r!==c.image.data.length){c&&c.dispose();let i=Math.min(r/4,1024);c=this._dataTextures[d?"outline":"main"]=new ba(new Float32Array(r),i,r/4/i,Sa,ka)}let e=c.image.data,a=p((i,n)=>{n!==e[i]&&(e[i]=n,c.needsUpdate=!0)},"setTexData");this._members.forEach(({index:i,dirty:n},o)=>{if(i>-1){let s=i*Et,l=o.matrix.elements;for(let S=0;S<16;S++)a(s+S,l[S]);o._prepareForRender(t);let{uTroikaTotalBounds:u,uTroikaClipRect:f,uTroikaPositionOffset:g,uTroikaEdgeOffset:x,uTroikaBlurRadius:m,uTroikaStrokeWidth:T,uTroikaStrokeColor:C,uTroikaStrokeOpacity:_,uTroikaFillOpacity:b,uTroikaCurveRadius:U}=t.uniforms;for(let S=0;S<4;S++)a(s+16+S,u.value.getComponent(S));for(let S=0;S<4;S++)a(s+20+S,f.value.getComponent(S));let E=d?o.outlineColor||0:o.color;E==null&&(E=this.color),E==null&&(E=this.material.color),E==null&&(E=16777215),a(s+24,_n.set(E).getHex()),a(s+25,b.value),a(s+26,U.value),d?(a(s+28,g.value.x),a(s+29,g.value.y),a(s+30,x.value),a(s+31,m.value)):(a(s+28,T.value),a(s+29,_n.set(C.value).getHex()),a(s+30,_.value))}}),t.setMatrixTexture(c),super._prepareForRender(t)}sync(t){let d=this._needsRepack?[]:null;this._needsRepack=!1,this._members.forEach((c,r)=>{(c.dirty||r._needsSync)&&(c.dirty=!1,(d||(d=[])).push(new Promise(e=>{r._needsSync?r.sync(e):e()})))}),d&&(this.dispatchEvent(di),Promise.all(d).then(()=>{let{geometry:c}=this,r=c.attributes,e=r[fr]&&r[fr].array||new Uint16Array(0),a=r[Dr]&&r[Dr].array||new Float32Array(0),i=r[Hr]&&r[Hr].array||new Float32Array(0),n=0;this._members.forEach((l,{textRenderInfo:u})=>{u&&(n+=u.glyphAtlasIndices.length,this._textRenderInfo=u)}),n!==e.length&&(e=Xr(e,n),a=Xr(a,n),i=Xr(i,n*4));let o=0,s=0;this._members.forEach((l,{textRenderInfo:u})=>{if(u){let f=u.glyphAtlasIndices.length;e.fill(o,s,s+f),a.set(u.glyphAtlasIndices,s,s+f),i.set(u.glyphBounds,s*4,(s+f)*4),s+=f,l.index=o++}}),c.updateAttributeData(fr,e,1),c.getAttribute(fr).setUsage(Ta),c.updateAttributeData(Dr,a,1),c.updateAttributeData(Hr,i,4),this.updateBounds(),this.dispatchEvent(hi),t&&t()}))}copy(t){return t instanceof la&&(super.copy(t),this._members.forEach((d,c)=>this.removeText(c)),t._members.forEach((d,c)=>this.addText(c))),this}dispose(){super.dispose(),Object.values(this._dataTextures).forEach(t=>t.dispose())}};p(sa,"BatchedText");var Ui=sa;function Xr(h,t){let d=new h.constructor(t);return d.set(h.subarray(0,t)),d}p(Xr,"cloneAndResize");function ua(h){let t="uTroikaMatricesTexture",d="uTroikaMatricesTextureSize",c=dr(h,{chained:!0,uniforms:{[d]:{value:new Ar},[t]:{value:null}},vertexDefs:`
      uniform highp sampler2D `.concat(t,`;
      uniform vec2 `).concat(d,`;
      attribute float `).concat(fr,`;

      vec4 troikaBatchTexel(float offset) {
        offset += `).concat(fr," * ").concat(Et.toFixed(1),` / 4.0;
        float w = `).concat(d,`.x;
        vec2 uv = (vec2(mod(offset, w), floor(offset / w)) + 0.5) / `).concat(d,`;
        return texture2D(`).concat(t,`, uv);
      }
    `),vertexTransform:`
      mat4 matrix = mat4(
        troikaBatchTexel(0.0),
        troikaBatchTexel(1.0),
        troikaBatchTexel(2.0),
        troikaBatchTexel(3.0)
      );
      position.xyz = (matrix * vec4(position, 1.0)).xyz;
    `});return c=zt(c),c=dr(c,{chained:!0,uniforms:{uTroikaIsOutline:{value:!1}},customRewriter(r){return["uTroikaTotalBounds","uTroikaClipRect","uTroikaPositionOffset","uTroikaEdgeOffset","uTroikaBlurRadius","uTroikaStrokeWidth","uTroikaStrokeColor","uTroikaStrokeOpacity","uTroikaFillOpacity","uTroikaCurveRadius","diffuse"].forEach(e=>{r=fa(r,e)}),r},vertexDefs:`
      uniform bool uTroikaIsOutline;
      vec3 troikaFloatToColor(float v) {
        return mod(floor(vec3(v / 65536.0, v / 256.0, v)), 256.0) / 256.0;
      }
    `,vertexTransform:`
      uTroikaTotalBounds = troikaBatchTexel(4.0);
      uTroikaClipRect = troikaBatchTexel(5.0);
      
      vec4 data = troikaBatchTexel(6.0);
      diffuse = troikaFloatToColor(data.x);
      uTroikaFillOpacity = data.y;
      uTroikaCurveRadius = data.z;
      
      data = troikaBatchTexel(7.0);
      if (uTroikaIsOutline) {
        if (data == vec4(0.0)) { // degenerate if zero outline
          position = vec3(0.0);
        } else {
          uTroikaPositionOffset = data.xy;
          uTroikaEdgeOffset = data.z;
          uTroikaBlurRadius = data.w;
        }
      } else {
        uTroikaStrokeWidth = data.x;
        uTroikaStrokeColor = troikaFloatToColor(data.y);
        uTroikaStrokeOpacity = data.z;
      }
    `}),c.setMatrixTexture=r=>{c.uniforms[t].value=r,c.uniforms[d].value.set(r.image.width,r.image.height)},c}p(ua,"createBatchedTextMaterial");function fa({vertexShader:h,fragmentShader:t},d,c=d){let r=new RegExp("uniform\\s+(bool|float|vec[234]|mat[34])\\s+".concat(d,"\\b")),e,a=!1;t=t.replace(r,(n,o)=>(a=!0,"varying ".concat(e=o," ").concat(c)));let i=!1;return h=h.replace(r,(n,o)=>(i=!0,"".concat(a?"varying":""," ").concat(e=o," ").concat(c))),i||(h="".concat(a?"varying":""," ").concat(e," ").concat(c,`;
`).concat(h)),{vertexShader:h,fragmentShader:t}}p(fa,"uniformToVarying");nr();var Cn="abcdefghijklmnopqrstuvwxyz",ca="roboto-regular.ttf";function da(h){return new Promise((t,d)=>{h?typeof h=="string"?Dt({font:h,characters:Cn},()=>{t(h)}):d(new Error("bad fontUrl ".concat(h))):On(()=>import("../../fonts/".concat(ca)),[]).then(c=>{Dt({font:c.default,characters:Cn},()=>{t(c.default)})})})}p(da,"preloadFont");var kt=.1,pi=new pr;function ha(h,t,d,c){return t<=0||d<=0?Promise.reject("incoorect dimension [".concat(t,", ").concat(d,"]")):new Promise((r,e)=>{h.sync(a);function a(){if(!h.geometry.boundingBox)return;let{x:i,y:n}=h.geometry.boundingBox.getSize(pi);if(n>d||i>t){if(h.fontSize===kt)return e("cannot find suitable font size for ".concat(h.text,". MaxSize: [").concat(t,", ").concat(d,"],  Current size: [").concat(i,", ").concat(n,"]. min font size").concat(kt,"."));h.fontSize=Math.max(kt,h.fontSize-c),h.sync(a)}else return r({size:[i,n]})}p(a,"syncCallback")})}p(ha,"fitTextToArea");function vi(h){return new Promise(t=>{h.sync(()=>{t()})})}p(vi,"syncText");async function Nt(){return(await On(()=>import("../../fonts/".concat(ca)),[])).default}p(Nt,"loadDefaultFont");function gi({useWorker:h=!0}){Kn({useWorker:h})}p(gi,"configureTroikaTextBuilder");var Tt=new Dn,ur=new pr,mi=new pr(0,0,1);async function yi(h,t,d,c){var r,e,a,i,n,o,s,l,u,f,g,x;let m=t.feature.properties,T=new cr;t.textMesh=T,T.text=m.text,T.anchorX="center",T.anchorY="middle",T.textAlign=(r=m.align)!=null?r:"center",T.color=(e=m.color)!=null?e:"black",T.fontSize=m.fontSize||20;let C=(a=d.font)!=null?a:_e.font;C?T.font=C:hr?T.font=await hr:T.font=await Nt(),T.outlineOpacity=(i=d.outlineOpacity)!=null?i:_e.outlineOpacity,T.outlineColor=(n=d.outlineColor)!=null?n:_e.outlineColor,T.outlineOffsetY=(o=d.outlineOffsetY)!=null?o:_e.outlineOffsetY,T.outlineOffsetX=(s=d.outlineOffsetX)!=null?s:_e.outlineOffsetX,T.outlineWidth=(l=d.outlineWidth)!=null?l:_e.outlineWidth,T.outlineBlur=(u=d.outlineBlur)!=null?u:_e.outlineBlur,T.strokeWidth=(f=d.strokeWidth)!=null?f:_e.strokeWidth,T.strokeColor=(g=d.strokeColor)!=null?g:_e.strokeColor,T.strokeOpacity=(x=d.strokeOpacity)!=null?x:_e.strokeOpacity;let _=c(t.feature.geometry.coordinates);return T.position.copy(_),T.position.z=m.verticalOffset,T.rotation.z=An.degToRad(-m.rotation),T.userData={entityId:h.toString(),rotationZ:-m.rotation},{text:T}}p(yi,"createTroikaTextPoint");async function xi(h,t,d,c){var r,e,a,i,n,o,s,l,u,f,g,x,m,T,C;let _=t.feature.properties,{textArea:b}=_;if(!b)throw new Error("textArea is required");let U=(r=d.margin)!=null?r:_e.margin,[E,S,F,P]=Array.isArray(U)?U:[U,U,U,U],I=new cr;I.text=_.content;let H=b.maxHeight-E-F,y=b.maxWidth-P-S;I.fontSize=Math.min(H,(e=d.fontSize)!=null?e:_e.fontSize),I.color=(a=d.color)!=null?a:_e.color,I.maxWidth=(i=d.maxWidth)!=null?i:y,I.anchorX="center",I.anchorY="middle",I.textAlign="center";let M=(n=d.font)!=null?n:_e.font;M?I.font=M:hr?I.font=await hr:I.font=await Nt(),I.outlineOpacity=(o=d.outlineOpacity)!=null?o:_e.outlineOpacity,I.outlineColor=(s=d.outlineColor)!=null?s:_e.outlineColor,I.outlineOffsetY=(l=d.outlineOffsetY)!=null?l:_e.outlineOffsetY,I.outlineOffsetX=(u=d.outlineOffsetX)!=null?u:_e.outlineOffsetX,I.outlineWidth=(f=d.outlineWidth)!=null?f:_e.outlineWidth,I.outlineBlur=(g=d.outlineBlur)!=null?g:_e.outlineBlur,I.strokeWidth=(x=d.strokeWidth)!=null?x:_e.strokeWidth,I.strokeColor=(m=d.strokeColor)!=null?m:_e.strokeColor,I.strokeOpacity=(T=d.strokeOpacity)!=null?T:_e.strokeOpacity;let O=c(b.position,ur);I.position.copy(O);let q=wa(Math.PI/2-An.degToRad(b.rotation));I.rotation.z=q,I.userData={entityId:h.toString(),rotationZ:q};let W;try{W=(await ha(I,y,H,I.fontSize*.2)).size}catch(te){throw(C=I.dispose)==null||C.call(I),new Error("Cannot fit text to area: entityId: ".concat(t.polygonEntityId," ").concat(te))}if(W)return Tt.identity(),ur.set(0,0,1),Tt.makeRotationAxis(mi,q),ur.set(b.align==="near"?P+W[0]/2:b.maxWidth/2,0,0),ur.applyMatrix4(Tt),I.position.x-=ur.x,I.position.y-=ur.y,t.textMesh=I,{text:I}}p(xi,"createTroikaTextArea");var hr;function bi(h){return hr=da(h),hr}p(bi,"preloadFont");export{Ui as BatchedText,cr as Text,gi as configureTroikaTextBuilder,xi as createTroikaTextArea,yi as createTroikaTextPoint,hr as fontPreloadLoadPromise,bi as preloadFont,vi as syncText};
